 Service browser-use-webui  Building
#0 building with "desktop-linux" instance using docker driver

#1 [browser-use-webui internal] load build definition from Dockerfile
#1 transferring dockerfile: 2.94kB done
#1 DONE 0.0s

#2 [browser-use-webui internal] load metadata for docker.io/library/python:3.11-slim
#2 ...

#3 [browser-use-webui auth] library/python:pull token for registry-1.docker.io
#3 DONE 0.0s

#2 [browser-use-webui internal] load metadata for docker.io/library/python:3.11-slim
#2 DONE 1.8s
 Service browser-use-webui  Built

#4 [browser-use-webui internal] load .dockerignore
#4 transferring context: 717B done
#4 DONE 0.0s

#5 [browser-use-webui  1/17] FROM docker.io/library/python:3.11-slim@sha256:82c07f2f6e35255b92eb16f38dbd22679d5e8fb523064138d7c6468e7bf0c15b
#5 DONE 0.0s

#6 [browser-use-webui internal] load build context
#6 transferring context: 218B done
#6 DONE 0.0s

#7 [browser-use-webui 16/17] COPY start-tmux.sh /app/
#7 CACHED

#8 [browser-use-webui  2/17] RUN apt-get update && apt-get install -y     wget     netcat-traditional     gnupg     curl     unzip     tmux     xvfb     libgconf-2-4     libxss1     libnss3     libnspr4     libasound2     libatk1.0-0     libatk-bridge2.0-0     libcups2     libdbus-1-3     libdrm2     libgbm1     libgtk-3-0     libxcomposite1     libxdamage1     libxfixes3     libxrandr2     xdg-utils     fonts-liberation     dbus     dbus-x11     xauth     xvfb     x11vnc     tigervnc-tools     supervisor     net-tools     procps     git     python3-numpy     fontconfig     fonts-dejavu     fonts-dejavu-core     fonts-dejavu-extra     && rm -rf /var/lib/apt/lists/*
#8 CACHED

#9 [browser-use-webui 14/17] RUN mkdir -p /var/log/supervisor
#9 CACHED

#10 [browser-use-webui  3/17] RUN git clone https://github.com/novnc/noVNC.git /opt/novnc     && git clone https://github.com/novnc/websockify /opt/novnc/utils/websockify     && ln -s /opt/novnc/vnc.html /opt/novnc/index.html
#10 CACHED

#11 [browser-use-webui 15/17] COPY supervisord.conf /etc/supervisor/conf.d/supervisord.conf
#11 CACHED

#12 [browser-use-webui 11/17] RUN mkdir -p /run/dbus && chmod 755 /run/dbus
#12 CACHED

#13 [browser-use-webui  9/17] RUN playwright install-deps
#13 CACHED

#14 [browser-use-webui  7/17] RUN pip install --no-cache-dir -r requirements.txt
#14 CACHED

#15 [browser-use-webui 10/17] RUN apt-get update && apt-get install -y dbus
#15 CACHED

#16 [browser-use-webui  8/17] RUN playwright install --with-deps chromium
#16 CACHED

#17 [browser-use-webui 13/17] RUN mkdir -p /root/.tmux
#17 CACHED

#18 [browser-use-webui 12/17] RUN dbus-uuidgen > /etc/machine-id && service dbus start
#18 CACHED

#19 [browser-use-webui  4/17] RUN curl -fsSL https://dl.google.com/linux/linux_signing_key.pub | gpg --dearmor -o /usr/share/keyrings/google-chrome.gpg     && echo "deb [arch=amd64 signed-by=/usr/share/keyrings/google-chrome.gpg] http://dl.google.com/linux/chrome/deb/ stable main" | tee /etc/apt/sources.list.d/google-chrome.list     && apt-get update     && apt-get install -y google-chrome-stable
#19 CACHED

#20 [browser-use-webui  6/17] COPY requirements.txt .
#20 CACHED

#21 [browser-use-webui  5/17] WORKDIR /app
#21 CACHED

#22 [browser-use-webui 17/17] RUN chmod +x /app/start-tmux.sh
#22 CACHED

#23 [browser-use-webui] exporting to image
#23 exporting layers done
#23 writing image sha256:4d308597ac45e1d2671aa1ffcd5f1321e41c8730426e21993c573b8c7c40a52d done
#23 naming to docker.io/library/action-engine-backend-browser-use-webui done
#23 DONE 0.0s

#24 [browser-use-webui] resolving provenance for metadata file
#24 DONE 0.0s
 Container action-engine-backend-browser-use-webui-1  Created
Attaching to browser-use-webui-1
browser-use-webui-1  | 2025-04-10 23:20:39,592 CRIT Supervisor is running as root.  Privileges were not dropped because no user is specified in the config file.  If you intend to run as root, you can set user=root in the config file to avoid this message.
browser-use-webui-1  | 2025-04-10 23:20:39,592 CRIT Supervisor is running as root.  Privileges were not dropped because no user is specified in the config file.  If you intend to run as root, you can set user=root in the config file to avoid this message.
browser-use-webui-1  | 2025-04-10 23:20:39,596 INFO supervisord started with pid 1
browser-use-webui-1  | 2025-04-10 23:20:39,596 INFO supervisord started with pid 1
browser-use-webui-1  | 2025-04-10 23:20:40,616 INFO spawned: 'dbus' with pid 6
browser-use-webui-1  | 2025-04-10 23:20:40,616 INFO spawned: 'dbus' with pid 6
browser-use-webui-1  | 2025-04-10 23:20:40,622 INFO spawned: '-bgfb' with pid 7
browser-use-webui-1  | 2025-04-10 23:20:40,622 INFO spawned: '-bgfb' with pid 7
browser-use-webui-1  | 2025-04-10 23:20:40,628 INFO spawned: 'tmux-server' with pid 8
browser-use-webui-1  | 2025-04-10 23:20:40,628 INFO spawned: 'tmux-server' with pid 8
browser-use-webui-1  | 2025-04-10 23:20:40,634 INFO spawned: 'vnc_setup' with pid 9
browser-use-webui-1  | 2025-04-10 23:20:40,634 INFO spawned: 'vnc_setup' with pid 9
browser-use-webui-1  | 2025-04-10 23:20:40,638 INFO spawned: 'x11vnc' with pid 10
browser-use-webui-1  | 2025-04-10 23:20:40,638 INFO spawned: 'x11vnc' with pid 10
browser-use-webui-1  | 2025-04-10 23:20:40,642 INFO spawned: 'x11vnc_log' with pid 11
browser-use-webui-1  | 2025-04-10 23:20:40,642 INFO spawned: 'x11vnc_log' with pid 11
browser-use-webui-1  | 2025-04-10 23:20:40,647 INFO spawned: 'novnc' with pid 12
browser-use-webui-1  | 2025-04-10 23:20:40,647 INFO spawned: 'novnc' with pid 12
browser-use-webui-1  | 2025-04-10 23:20:40,658 INFO spawned: 'backend' with pid 13
browser-use-webui-1  | 2025-04-10 23:20:40,658 INFO spawned: 'backend' with pid 13
browser-use-webui-1  | _XSERVTransSocketCreateListener: failed to bind listener
browser-use-webui-1  | _XSERVTransSocketUNIXCreateListener: ...SocketCreateListener() failed
browser-use-webui-1  | _XSERVTransMakeAllCOTSServerListeners: failed to create listener for unix
browser-use-webui-1  | 2025-04-10 23:20:40,675 INFO success: vnc_setup entered RUNNING state, process has stayed up for > than 0 seconds (startsecs)
browser-use-webui-1  | 2025-04-10 23:20:40,675 INFO success: vnc_setup entered RUNNING state, process has stayed up for > than 0 seconds (startsecs)
browser-use-webui-1  | Xlib:  extension "DPMS" missing on display ":99".
browser-use-webui-1  | 
browser-use-webui-1  | The VNC desktop is:      30ee7a78b5e2:0
browser-use-webui-1  | -rw------- 1 root root 8 Apr 10 23:20 /root/.vnc/passwd
browser-use-webui-1  | 2025-04-10 23:20:40,819 INFO exited: vnc_setup (exit status 0; expected)
browser-use-webui-1  | 2025-04-10 23:20:40,819 INFO exited: vnc_setup (exit status 0; expected)
browser-use-webui-1  | Creating default tmux session: terminal-session
browser-use-webui-1  | INFO:     Will watch for changes in these directories: ['/app']
browser-use-webui-1  | INFO:     Uvicorn running on http://0.0.0.0:7788 (Press CTRL+C to quit)
browser-use-webui-1  | INFO:     Started reloader process [13] using StatReload
browser-use-webui-1  | Default session created successfully
browser-use-webui-1  | Active tmux sessions:
browser-use-webui-1  | terminal-session: 1 windows (created Thu Apr 10 23:20:40 2025)
browser-use-webui-1  | INFO     [browser_use] BrowserUse logging setup complete with level info
browser-use-webui-1  | 2025-04-10 23:20:41,903 INFO success: x11vnc_log entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)
browser-use-webui-1  | 2025-04-10 23:20:41,903 INFO success: x11vnc_log entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)
browser-use-webui-1  | 2025-04-10 23:20:43,813 INFO success: dbus entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-10 23:20:43,813 INFO success: dbus entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-10 23:20:43,813 INFO success: -bgfb entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-10 23:20:43,813 INFO success: -bgfb entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-10 23:20:43,813 INFO success: tmux-server entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-10 23:20:43,813 INFO success: tmux-server entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-10 23:20:43,813 INFO success: novnc entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-10 23:20:43,813 INFO success: novnc entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-10 23:20:43,813 INFO success: backend entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-10 23:20:43,813 INFO success: backend entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | PORT=5900
browser-use-webui-1  | INFO     [src.graph.environments.terminal] TerminalManager instance created
browser-use-webui-1  | INFO:     Started server process [36]
browser-use-webui-1  | INFO:     Waiting for application startup.
browser-use-webui-1  | INFO:     Application startup complete.
browser-use-webui-1  | INFO:     ('172.18.0.1', 61836) - "WebSocket /ws/terminal" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Generated terminal ID: 3833
browser-use-webui-1  | INFO:     ('172.18.0.1', 61842) - "WebSocket /ws/terminal" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Generated terminal ID: 5881
browser-use-webui-1  | INFO     [main] New WebSocket connection attempt
browser-use-webui-1  | INFO:     ('172.18.0.1', 61848) - "WebSocket /ws/chat" [accepted]
browser-use-webui-1  | INFO     [main] New WebSocket connection for stop requests
browser-use-webui-1  | INFO:     ('172.18.0.1', 61850) - "WebSocket /ws/stop" [accepted]
browser-use-webui-1  | INFO     [main] New WebSocket connection attempt
browser-use-webui-1  | INFO:     ('172.18.0.1', 61854) - "WebSocket /ws/chat" [accepted]
browser-use-webui-1  | INFO     [main] New WebSocket connection for stop requests
browser-use-webui-1  | INFO:     ('172.18.0.1', 61858) - "WebSocket /ws/stop" [accepted]
browser-use-webui-1  | INFO:     ('172.18.0.1', 61874) - "WebSocket /ws/terminal" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Generated terminal ID: 3187
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | 2025-04-10 23:20:45,851 INFO success: x11vnc entered RUNNING state, process has stayed up for > than 5 seconds (startsecs)
browser-use-webui-1  | 2025-04-10 23:20:45,851 INFO success: x11vnc entered RUNNING state, process has stayed up for > than 5 seconds (startsecs)
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | Warning: could not find self.pem
browser-use-webui-1  | Using local websockify at /opt/novnc/utils/websockify/run
browser-use-webui-1  | Starting webserver and WebSockets proxy on host 0.0.0.0 port 6080
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Terminal 3833 created with working directory: /root
browser-use-webui-1  | INFO     [main] Assigned terminal 3833 to new WebSocket connection
browser-use-webui-1  | ERROR    [main] Failed to send initial terminal ID: 
browser-use-webui-1  | Traceback (most recent call last):
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/websockets/wsproto_impl.py", line 331, in send
browser-use-webui-1  |     output = self.conn.send(wsproto.events.Message(data=data))  # type: ignore
browser-use-webui-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/wsproto/__init__.py", line 64, in send
browser-use-webui-1  |     data += self.connection.send(event)
browser-use-webui-1  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/wsproto/connection.py", line 107, in send
browser-use-webui-1  |     raise LocalProtocolError(
browser-use-webui-1  | wsproto.utilities.LocalProtocolError: Event Message(data='{"terminal_id": "3833", "working_directory": "/root", "summary": "", "marker_id": 0}', frame_finished=True, message_finished=True) cannot be sent in state ConnectionState.CLOSED.
browser-use-webui-1  | 
browser-use-webui-1  | The above exception was the direct cause of the following exception:
browser-use-webui-1  | 
browser-use-webui-1  | Traceback (most recent call last):
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/websockets.py", line 85, in send
browser-use-webui-1  |     await self._send(message)
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 39, in sender
browser-use-webui-1  |     await send(message)
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/websockets/wsproto_impl.py", line 350, in send
browser-use-webui-1  |     raise ClientDisconnected from exc
browser-use-webui-1  | uvicorn.protocols.utils.ClientDisconnected
browser-use-webui-1  | 
browser-use-webui-1  | During handling of the above exception, another exception occurred:
browser-use-webui-1  | 
browser-use-webui-1  | Traceback (most recent call last):
browser-use-webui-1  |   File "/app/main.py", line 266, in terminal_endpoint
browser-use-webui-1  |     await websocket.send_text(
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/websockets.py", line 165, in send_text
browser-use-webui-1  |     await self.send({"type": "websocket.send", "text": data})
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/websockets.py", line 88, in send
browser-use-webui-1  |     raise WebSocketDisconnect(code=1006)
browser-use-webui-1  | starlette.websockets.WebSocketDisconnect
browser-use-webui-1  | WebSocket server settings:
browser-use-webui-1  |   - Listen on 0.0.0.0:6080
browser-use-webui-1  |   - Web server. Web root: /opt/novnc
browser-use-webui-1  |   - No SSL/TLS support (no cert file)
browser-use-webui-1  |   - proxying from 0.0.0.0:6080 to localhost:5900
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Terminal 3187 created with working directory: /root
browser-use-webui-1  | INFO     [main] Assigned terminal 3187 to new WebSocket connection
browser-use-webui-1  | INFO     [main] Polling terminal output for terminal 3187 )
browser-use-webui-1  | 
browser-use-webui-1  | 
browser-use-webui-1  | Navigate to this URL:
browser-use-webui-1  | 
browser-use-webui-1  |     http://0.0.0.0:6080/vnc.html?host=0.0.0.0&port=6080
browser-use-webui-1  | 
browser-use-webui-1  | Press Ctrl-C to exit
browser-use-webui-1  | 
browser-use-webui-1  | 
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Terminal 5881 created with working directory: /root
browser-use-webui-1  | INFO     [main] Assigned terminal 5881 to new WebSocket connection
browser-use-webui-1  | INFO     [main] Polling terminal output for terminal 5881 )
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] WebSocket disconnected for terminal 5881 
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] Polling task for terminal 5881 cancelled
browser-use-webui-1  | INFO:     ('172.18.0.1', 60240) - "WebSocket /ws/terminal" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Generated terminal ID: 6598
browser-use-webui-1  | INFO:     ('172.18.0.1', 60244) - "WebSocket /ws/chat" [accepted]
browser-use-webui-1  | INFO     [main] New WebSocket connection attempt
browser-use-webui-1  | 172.18.0.1 - - [10/Apr/2025 23:20:53] 172.18.0.1: Plain non-SSL (ws://) WebSocket connection
browser-use-webui-1  | 172.18.0.1 - - [10/Apr/2025 23:20:53] connecting to: localhost:5900
browser-use-webui-1  | INFO     [main] New WebSocket connection for stop requests
browser-use-webui-1  | INFO:     ('172.18.0.1', 60246) - "WebSocket /ws/stop" [accepted]
browser-use-webui-1  | 172.18.0.1 - - [10/Apr/2025 23:20:53] 172.18.0.1: Plain non-SSL (ws://) WebSocket connection
browser-use-webui-1  | 172.18.0.1 - - [10/Apr/2025 23:20:53] connecting to: localhost:5900
browser-use-webui-1  | INFO     [main] New WebSocket connection attempt
browser-use-webui-1  | INFO:     ('172.18.0.1', 60256) - "WebSocket /ws/chat" [accepted]
browser-use-webui-1  | INFO     [main] New WebSocket connection for stop requests
browser-use-webui-1  | INFO:     ('172.18.0.1', 60270) - "WebSocket /ws/stop" [accepted]
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Terminal 6598 created with working directory: /root
browser-use-webui-1  | INFO     [main] Assigned terminal 6598 to new WebSocket connection
browser-use-webui-1  | INFO     [main] Polling terminal output for terminal 6598 )
browser-use-webui-1  | INFO     [main] Initializing graph runner for new chat session
browser-use-webui-1  | INFO     [src.browser.custom_browser] No Chrome instance found
browser-use-webui-1  | INFO     [src.browser.custom_browser] Starting new Chrome instance
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Successfully connected to new Chrome instance
browser-use-webui-1  | INFO     [src.graph.graph_runner] Starting graph execution with streaming
browser-use-webui-1  | INFO     [src.graph.graph_runner] Thread ID: 10cc6e3b-3f4f-437c-9224-b43164f2f71b
browser-use-webui-1  | INFO     [src.graph.nodes.planning] PlanningNode invoked
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Pruned 0 messages from 0 to 0
browser-use-webui-1  | 2025-04-10 23:21:14,417 INFO reaped unknown pid 481 (exit status 0)
browser-use-webui-1  | 2025-04-10 23:21:14,417 INFO reaped unknown pid 481 (exit status 0)
browser-use-webui-1  | 2025-04-10 23:21:14,417 INFO reaped unknown pid 482 (exit status 0)
browser-use-webui-1  | 2025-04-10 23:21:14,417 INFO reaped unknown pid 482 (exit status 0)
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] planning node validated tool calls: ['planning']
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] planning node got valid response with tools: ['planning']
browser-use-webui-1  | INFO     [src.graph.nodes.planning] Executing tool calls: [{'name': 'planning', 'args': {'command': 'create', 'task': 'List files', 'steps': [{'content': 'Execute `ls /` command'}]}, 'id': 'call_80da467a-4691-48df-b615-aba986d8464b', 'type': 'tool_call'}]
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] planning node validated tool calls: ['planning']
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Executing tool planning
browser-use-webui-1  | INFO     [tools.tool_collection] Executing tool planning with input: {'command': 'create', 'task': 'List files', 'steps': [{'content': 'Execute `ls /` command'}]}
browser-use-webui-1  | INFO     [tools.planning] Planning tool invoked with command: PlanCommand.CREATE
browser-use-webui-1  | INFO     [src.graph.graph_runner] Step output: {'planning': {'task': 'ls /', 'plan': {'plan_id': 'plan_0', 'title': 'List files', 'steps': [{'content': 'Execute `ls /` command', 'status': 'not_started', 'notes': '', 'substeps': []}]}, 'brain': {}, 'thought': '', 'summary': '', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'task': 'List files', 'steps': [{'content': 'Execute `ls /` command'}]}, 'id': 'call_80da467a-4691-48df-b615-aba986d8464b', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: List files (ID: plan_0)\n==========================================\n\nProgress: 0/1 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 1 not started\n\nSteps:\n0. [ ] Execute `ls /` command\n', 'tool_call_id': 'call_80da467a-4691-48df-b615-aba986d8464b', 'tool_name': 'planning'}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False}}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Updating current state from node: planning
browser-use-webui-1  | INFO     [src.graph.nodes.tool_generator] ToolSelectionNode invoked
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Pruned 0 messages from 2 to 2
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] tool_generator node validated tool calls: ['terminal']
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] tool_generator node got valid response with tools: ['terminal']
browser-use-webui-1  | INFO     [src.graph.nodes.tool_generator] ToolSelectionNode selected tool calls: [{'name': 'terminal', 'args': {'action': 'run', 'script': 'ls /'}, 'id': 'call_0ae0bad1-386a-494e-aaab-3b963cbb4d70', 'type': 'tool_call'}]
browser-use-webui-1  | INFO     [src.graph.graph_runner] Step output: {'tool_selection': {'task': 'ls /', 'plan': {'plan_id': 'plan_0', 'title': 'List files', 'steps': [{'content': 'Execute `ls /` command', 'status': 'not_started', 'notes': '', 'substeps': []}]}, 'brain': {}, 'thought': '', 'summary': '', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'task': 'List files', 'steps': [{'content': 'Execute `ls /` command'}]}, 'id': 'call_80da467a-4691-48df-b615-aba986d8464b', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: List files (ID: plan_0)\n==========================================\n\nProgress: 0/1 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 1 not started\n\nSteps:\n0. [ ] Execute `ls /` command\n', 'tool_call_id': 'call_80da467a-4691-48df-b615-aba986d8464b', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: [Executor Node]: Executing the next step from the plan which is to execute `ls /` command.\n', 'tool_calls': [{'name': 'terminal', 'args': {'action': 'run', 'script': 'ls /'}, 'id': 'call_0ae0bad1-386a-494e-aaab-3b963cbb4d70', 'type': 'tool_call'}]}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False}}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Updating current state from node: tool_selection
browser-use-webui-1  | INFO     [src.graph.nodes.approval] Human in the loop Node invoked
browser-use-webui-1  | INFO     [src.graph.nodes.approval] State keys in HITL node: ['task', 'plan', 'brain', 'thought', 'summary', 'context', 'messages', 'tools_used', 'error', 'next_node', 'exiting']
browser-use-webui-1  | INFO     [src.graph.nodes.approval] HumanApprovalNode full state:
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   task: <class 'str'> -> ls /
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   plan: <class 'dict'> -> {'plan_id': 'plan_0', 'title': 'List files', 'steps': [{'content': 'Execute `ls /` command', 'status': 'not_started', 'notes': '', 'substeps': []}]}
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   brain: <class 'dict'> -> {}
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   thought: <class 'str'> -> 
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   summary: <class 'str'> -> 
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   context: <class 'dict'> -> {}
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   messages: <class 'list'> -> [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'task': 'List files', 'steps': [{'content': 'Execute `ls /` command'}]}, 'id': 'call_80da467a-4691-48df-b615-aba986d8464b', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: List files (ID: plan_0)\n==========================================\n\nProgress: 0/1 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 1 not started\n\nSteps:\n0. [ ] Execute `ls /` command\n', 'tool_call_id': 'call_80da467a-4691-48df-b615-aba986d8464b', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: [Executor Node]: Executing the next step from the plan which is to execute `ls /` command.\n', 'tool_calls': [{'name': 'terminal', 'args': {'action': 'run', 'script': 'ls /'}, 'id': 'call_0ae0bad1-386a-494e-aaab-3b963cbb4d70', 'type': 'tool_call'}]}]
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   tools_used: <class 'list'> -> []
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   error: <class 'NoneType'> -> None
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   next_node: <class 'NoneType'> -> None
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   exiting: <class 'bool'> -> False
browser-use-webui-1  | INFO     [src.graph.nodes.approval] Found 0 pending_tool_calls in state.
browser-use-webui-1  | INFO     [src.graph.nodes.approval] No pending_tool_calls found in state, checking messages
browser-use-webui-1  | INFO     [src.graph.nodes.approval] Found terminal tool call in messages: {'name': 'terminal', 'args': {'action': 'run', 'script': 'ls /'}, 'id': 'call_0ae0bad1-386a-494e-aaab-3b963cbb4d70', 'type': 'tool_call'}
browser-use-webui-1  | INFO     [src.graph.nodes.approval] Raising HITL interrupt for terminal action: {'name': 'terminal', 'args': {'action': 'run', 'script': 'ls /'}, 'id': 'call_0ae0bad1-386a-494e-aaab-3b963cbb4d70', 'type': 'tool_call'}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Step output: {'__interrupt__': (Interrupt(value={'tool_call': {'name': 'terminal', 'args': {'action': 'run', 'script': 'ls /'}, 'id': 'call_0ae0bad1-386a-494e-aaab-3b963cbb4d70', 'type': 'tool_call'}, 'message': "Do you approve executing the terminal command: 'ls /' on terminal N/A?", '__interrupt_type': 'approval_request'}, resumable=True, ns=['human_approval:8621ec68-6998-1009-d1d1-5db90d544283'], when='during'),)}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Found interrupt in step_output
browser-use-webui-1  | INFO     [src.graph.graph_runner] Formatted interrupt response to match node output structure
browser-use-webui-1  | INFO     [main] Sent approval request to client, waiting for response
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO:     ('172.18.0.1', 64448) - "WebSocket /ws/terminal" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Generated terminal ID: 7427
browser-use-webui-1  | INFO     [main] New WebSocket connection attempt
browser-use-webui-1  | INFO:     ('172.18.0.1', 64454) - "WebSocket /ws/chat" [accepted]
browser-use-webui-1  | INFO     [main] New WebSocket connection for stop requests
browser-use-webui-1  | INFO:     ('172.18.0.1', 64464) - "WebSocket /ws/stop" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Generated terminal ID: 7203
browser-use-webui-1  | INFO:     ('172.18.0.1', 64474) - "WebSocket /ws/terminal" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Terminal 7427 created with working directory: /root
browser-use-webui-1  | INFO     [main] Assigned terminal 7427 to new WebSocket connection
browser-use-webui-1  | INFO     [main] WebSocket disconnected for terminal 7427 
browser-use-webui-1  | INFO     [main] Polling task for terminal 7427 cancelled
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Terminal 7203 created with working directory: /root
browser-use-webui-1  | INFO     [main] Assigned terminal 7203 to new WebSocket connection
browser-use-webui-1  | INFO     [main] Polling terminal output for terminal 7203 )
browser-use-webui-1  | INFO:     ('172.18.0.1', 64490) - "WebSocket /ws/terminal" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Generated terminal ID: 3080
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Terminal 3080 created with working directory: /root
browser-use-webui-1  | INFO     [main] Assigned terminal 3080 to new WebSocket connection
browser-use-webui-1  | INFO     [main] Polling terminal output for terminal 3080 )
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] WebSocket disconnected for terminal 3080 
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] Polling task for terminal 3080 cancelled
browser-use-webui-1  | INFO:     ('172.18.0.1', 63610) - "WebSocket /ws/terminal" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Generated terminal ID: 7116
browser-use-webui-1  | INFO     [main] New WebSocket connection attempt
browser-use-webui-1  | INFO:     ('172.18.0.1', 63618) - "WebSocket /ws/chat" [accepted]
browser-use-webui-1  | INFO     [main] New WebSocket connection for stop requests
browser-use-webui-1  | INFO:     ('172.18.0.1', 63628) - "WebSocket /ws/stop" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Terminal 7116 created with working directory: /root
browser-use-webui-1  | INFO     [main] Assigned terminal 7116 to new WebSocket connection
browser-use-webui-1  | INFO     [main] Polling terminal output for terminal 7116 )
browser-use-webui-1  | INFO:     ('172.18.0.1', 63542) - "WebSocket /ws/terminal" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Generated terminal ID: 3954
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Terminal 3954 created with working directory: /root
browser-use-webui-1  | INFO     [main] Assigned terminal 3954 to new WebSocket connection
browser-use-webui-1  | INFO     [main] Polling terminal output for terminal 3954 )
browser-use-webui-1  | INFO     [main] WebSocket disconnected for terminal 6598 
browser-use-webui-1  | INFO     [main] WebSocket disconnected for terminal 7203 
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] WebSocket disconnected for terminal 3954 
browser-use-webui-1  | INFO     [main] WebSocket disconnected for terminal 7116 
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] Polling task for terminal 6598 cancelled
browser-use-webui-1  | INFO     [main] Polling task for terminal 7203 cancelled
browser-use-webui-1  | INFO     [main] Polling task for terminal 3954 cancelled
browser-use-webui-1  | INFO     [main] Polling task for terminal 7116 cancelled
browser-use-webui-1  | INFO:     ('172.18.0.1', 63738) - "WebSocket /ws/terminal" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Generated terminal ID: 6051
browser-use-webui-1  | 172.18.0.1 - - [10/Apr/2025 23:36:53] 172.18.0.1: Plain non-SSL (ws://) WebSocket connection
browser-use-webui-1  | 172.18.0.1 - - [10/Apr/2025 23:36:53] connecting to: localhost:5900
browser-use-webui-1  | INFO     [main] New WebSocket connection attempt
browser-use-webui-1  | INFO:     ('172.18.0.1', 63744) - "WebSocket /ws/chat" [accepted]
browser-use-webui-1  | INFO     [main] New WebSocket connection for stop requests
browser-use-webui-1  | INFO:     ('172.18.0.1', 63750) - "WebSocket /ws/stop" [accepted]
browser-use-webui-1  | INFO:     ('172.18.0.1', 63756) - "WebSocket /ws/chat" [accepted]
browser-use-webui-1  | INFO     [main] New WebSocket connection attempt
browser-use-webui-1  | 172.18.0.1 - - [10/Apr/2025 23:36:54] 172.18.0.1: Plain non-SSL (ws://) WebSocket connection
browser-use-webui-1  | 172.18.0.1 - - [10/Apr/2025 23:36:54] connecting to: localhost:5900
browser-use-webui-1  | INFO:     ('172.18.0.1', 63762) - "WebSocket /ws/stop" [accepted]
browser-use-webui-1  | INFO     [main] New WebSocket connection for stop requests
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Terminal 6051 created with working directory: /root
browser-use-webui-1  | INFO     [main] Assigned terminal 6051 to new WebSocket connection
browser-use-webui-1  | INFO     [main] Polling terminal output for terminal 6051 )
browser-use-webui-1  | INFO     [main] Initializing graph runner for new chat session
browser-use-webui-1  | INFO     [src.graph.graph_runner] Starting graph execution with streaming
browser-use-webui-1  | INFO     [src.graph.graph_runner] Thread ID: 73840dac-57e7-4a0b-8032-070c32b5ba52
browser-use-webui-1  | INFO     [src.graph.nodes.planning] PlanningNode invoked
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Pruned 0 messages from 0 to 0
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] planning node validated tool calls: ['planning']
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] planning node got valid response with tools: ['planning']
browser-use-webui-1  | INFO     [src.graph.nodes.planning] Executing tool calls: [{'name': 'planning', 'args': {'command': 'create', 'steps': [{'content': 'Navigate to cisco.com'}, {'content': 'Click support'}], 'task': 'Navigate to cisco.com and click support'}, 'id': 'call_ba3d0b31-63eb-48a9-8ac5-9d8ea5070887', 'type': 'tool_call'}]
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] planning node validated tool calls: ['planning']
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Executing tool planning
browser-use-webui-1  | INFO     [tools.tool_collection] Executing tool planning with input: {'command': 'create', 'steps': [{'content': 'Navigate to cisco.com'}, {'content': 'Click support'}], 'task': 'Navigate to cisco.com and click support'}
browser-use-webui-1  | INFO     [tools.planning] Planning tool invoked with command: PlanCommand.CREATE
browser-use-webui-1  | INFO     [src.graph.graph_runner] Step output: {'planning': {'task': 'Navigate to cisco.com and click on support', 'plan': {'plan_id': 'plan_1', 'title': 'Navigate to cisco.com and click support', 'steps': [{'content': 'Navigate to cisco.com', 'status': 'not_started', 'notes': '', 'substeps': []}, {'content': 'Click support', 'status': 'not_started', 'notes': '', 'substeps': []}]}, 'brain': {}, 'thought': '', 'summary': '', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'steps': [{'content': 'Navigate to cisco.com'}, {'content': 'Click support'}], 'task': 'Navigate to cisco.com and click support'}, 'id': 'call_ba3d0b31-63eb-48a9-8ac5-9d8ea5070887', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Navigate to cisco.com and click support (ID: plan_1)\n=======================================================================\n\nProgress: 0/2 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 2 not started\n\nSteps:\n0. [ ] Navigate to cisco.com\n1. [ ] Click support\n', 'tool_call_id': 'call_ba3d0b31-63eb-48a9-8ac5-9d8ea5070887', 'tool_name': 'planning'}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False}}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Updating current state from node: planning
browser-use-webui-1  | INFO     [src.graph.nodes.tool_generator] ToolSelectionNode invoked
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Pruned 0 messages from 2 to 2
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] tool_generator node validated tool calls: ['browser_use']
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] tool_generator node got valid response with tools: ['browser_use']
browser-use-webui-1  | INFO     [src.graph.nodes.tool_generator] ToolSelectionNode selected tool calls: [{'name': 'browser_use', 'args': {'url': 'cisco.com', 'action': 'navigate'}, 'id': 'call_9c23e7e5-1a5d-4926-83d0-768da7925b8d', 'type': 'tool_call'}]
browser-use-webui-1  | INFO     [src.graph.graph_runner] Step output: {'tool_selection': {'task': 'Navigate to cisco.com and click on support', 'plan': {'plan_id': 'plan_1', 'title': 'Navigate to cisco.com and click support', 'steps': [{'content': 'Navigate to cisco.com', 'status': 'not_started', 'notes': '', 'substeps': []}, {'content': 'Click support', 'status': 'not_started', 'notes': '', 'substeps': []}]}, 'brain': {}, 'thought': '', 'summary': '', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'steps': [{'content': 'Navigate to cisco.com'}, {'content': 'Click support'}], 'task': 'Navigate to cisco.com and click support'}, 'id': 'call_ba3d0b31-63eb-48a9-8ac5-9d8ea5070887', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Navigate to cisco.com and click support (ID: plan_1)\n=======================================================================\n\nProgress: 0/2 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 2 not started\n\nSteps:\n0. [ ] Navigate to cisco.com\n1. [ ] Click support\n', 'tool_call_id': 'call_ba3d0b31-63eb-48a9-8ac5-9d8ea5070887', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: ', 'tool_calls': [{'name': 'browser_use', 'args': {'url': 'cisco.com', 'action': 'navigate'}, 'id': 'call_9c23e7e5-1a5d-4926-83d0-768da7925b8d', 'type': 'tool_call'}]}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False}}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Updating current state from node: tool_selection
browser-use-webui-1  | INFO     [src.graph.nodes.approval] Human in the loop Node invoked
browser-use-webui-1  | INFO     [src.graph.nodes.approval] State keys in HITL node: ['task', 'plan', 'brain', 'thought', 'summary', 'context', 'messages', 'tools_used', 'error', 'next_node', 'exiting']
browser-use-webui-1  | INFO     [src.graph.nodes.approval] HumanApprovalNode full state:
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   task: <class 'str'> -> Navigate to cisco.com and click on support
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   plan: <class 'dict'> -> {'plan_id': 'plan_1', 'title': 'Navigate to cisco.com and click support', 'steps': [{'content': 'Navigate to cisco.com', 'status': 'not_started', 'notes': '', 'substeps': []}, {'content': 'Click support', 'status': 'not_started', 'notes': '', 'substeps': []}]}
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   brain: <class 'dict'> -> {}
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   thought: <class 'str'> -> 
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   summary: <class 'str'> -> 
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   context: <class 'dict'> -> {}
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   messages: <class 'list'> -> [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'steps': [{'content': 'Navigate to cisco.com'}, {'content': 'Click support'}], 'task': 'Navigate to cisco.com and click support'}, 'id': 'call_ba3d0b31-63eb-48a9-8ac5-9d8ea5070887', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Navigate to cisco.com and click support (ID: plan_1)\n=======================================================================\n\nProgress: 0/2 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 2 not started\n\nSteps:\n0. [ ] Navigate to cisco.com\n1. [ ] Click support\n', 'tool_call_id': 'call_ba3d0b31-63eb-48a9-8ac5-9d8ea5070887', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: ', 'tool_calls': [{'name': 'browser_use', 'args': {'url': 'cisco.com', 'action': 'navigate'}, 'id': 'call_9c23e7e5-1a5d-4926-83d0-768da7925b8d', 'type': 'tool_call'}]}]
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   tools_used: <class 'list'> -> []
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   error: <class 'NoneType'> -> None
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   next_node: <class 'NoneType'> -> None
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   exiting: <class 'bool'> -> False
browser-use-webui-1  | INFO     [src.graph.nodes.approval] Found 0 pending_tool_calls in state.
browser-use-webui-1  | INFO     [src.graph.nodes.approval] No pending_tool_calls found in state, checking messages
browser-use-webui-1  | INFO     [src.graph.nodes.approval] No terminal tool call found, skipping HITL
browser-use-webui-1  | INFO     [src.graph.graph_runner] Step output: {'human_approval': {'task': 'Navigate to cisco.com and click on support', 'plan': {'plan_id': 'plan_1', 'title': 'Navigate to cisco.com and click support', 'steps': [{'content': 'Navigate to cisco.com', 'status': 'not_started', 'notes': '', 'substeps': []}, {'content': 'Click support', 'status': 'not_started', 'notes': '', 'substeps': []}]}, 'brain': {}, 'thought': '', 'summary': '', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'steps': [{'content': 'Navigate to cisco.com'}, {'content': 'Click support'}], 'task': 'Navigate to cisco.com and click support'}, 'id': 'call_ba3d0b31-63eb-48a9-8ac5-9d8ea5070887', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Navigate to cisco.com and click support (ID: plan_1)\n=======================================================================\n\nProgress: 0/2 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 2 not started\n\nSteps:\n0. [ ] Navigate to cisco.com\n1. [ ] Click support\n', 'tool_call_id': 'call_ba3d0b31-63eb-48a9-8ac5-9d8ea5070887', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: ', 'tool_calls': [{'name': 'browser_use', 'args': {'url': 'cisco.com', 'action': 'navigate'}, 'id': 'call_9c23e7e5-1a5d-4926-83d0-768da7925b8d', 'type': 'tool_call'}]}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False}}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Updating current state from node: human_approval
browser-use-webui-1  | INFO     [src.graph.nodes.thinking] ThinkingNode invoked
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Pruned 0 messages from 3 to 3
browser-use-webui-1  | ERROR    [src.graph.graph_runner] Error in graph execution: Error code: 400 - {'message': 'ostinato.BadRequestError: VertexAIException BadRequestError - {\n  "error": {\n    "code": 400,\n    "message": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[1].value\': Cannot find field.\\nInvalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[2].value\': Cannot find field.",\n    "status": "INVALID_ARGUMENT",\n    "details": [\n      {\n        "@type": "type.googleapis.com/google.rpc.BadRequest",\n        "fieldViolations": [\n          {\n            "field": "generation_config.response_schema.properties[1].value",\n            "description": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[1].value\': Cannot find field."\n          },\n          {\n            "field": "generation_config.response_schema.properties[2].value",\n            "description": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[2].value\': Cannot find field."\n          }\n        ]\n      }\n    ]\n  }\n}'}
browser-use-webui-1  | Traceback (most recent call last):
browser-use-webui-1  |   File "/app/src/graph/graph_runner.py", line 118, in execute
browser-use-webui-1  |     async for step_output in self.graph.astream(
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langgraph/pregel/__init__.py", line 2305, in astream
browser-use-webui-1  |     async for _ in runner.atick(
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langgraph/pregel/runner.py", line 444, in atick
browser-use-webui-1  |     await arun_with_retry(
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langgraph/pregel/retry.py", line 128, in arun_with_retry
browser-use-webui-1  |     return await task.proc.ainvoke(task.input, config)
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langgraph/utils/runnable.py", line 583, in ainvoke
browser-use-webui-1  |     input = await step.ainvoke(input, config, **kwargs)
browser-use-webui-1  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langgraph/utils/runnable.py", line 371, in ainvoke
browser-use-webui-1  |     ret = await asyncio.create_task(coro, context=context)
browser-use-webui-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/app/src/graph/nodes/base_node.py", line 29, in __call__
browser-use-webui-1  |     return await self.ainvoke(state, config)
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/app/src/graph/nodes/thinking.py", line 70, in ainvoke
browser-use-webui-1  |     _response = await structured_llm.ainvoke(local_messages)
browser-use-webui-1  |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langchain_core/runnables/base.py", line 3058, in ainvoke
browser-use-webui-1  |     input = await asyncio.create_task(part(), context=context)  # type: ignore
browser-use-webui-1  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langchain_core/runnables/base.py", line 5364, in ainvoke
browser-use-webui-1  |     return await self.bound.ainvoke(
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 305, in ainvoke
browser-use-webui-1  |     llm_result = await self.agenerate_prompt(
browser-use-webui-1  |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 870, in agenerate_prompt
browser-use-webui-1  |     return await self.agenerate(
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 830, in agenerate
browser-use-webui-1  |     raise exceptions[0]
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 998, in _agenerate_with_cache
browser-use-webui-1  |     result = await self._agenerate(
browser-use-webui-1  |              ^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langchain_openai/chat_models/base.py", line 954, in _agenerate
browser-use-webui-1  |     _handle_openai_bad_request(e)
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langchain_openai/chat_models/base.py", line 950, in _agenerate
browser-use-webui-1  |     response = await self.root_async_client.beta.chat.completions.parse(
browser-use-webui-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/openai/resources/beta/chat/completions.py", line 436, in parse
browser-use-webui-1  |     return await self._post(
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/openai/_base_client.py", line 1849, in post
browser-use-webui-1  |     return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/openai/_base_client.py", line 1543, in request
browser-use-webui-1  |     return await self._request(
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/openai/_base_client.py", line 1644, in _request
browser-use-webui-1  |     raise self._make_status_error_from_response(err.response) from None
browser-use-webui-1  | openai.BadRequestError: Error code: 400 - {'message': 'ostinato.BadRequestError: VertexAIException BadRequestError - {\n  "error": {\n    "code": 400,\n    "message": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[1].value\': Cannot find field.\\nInvalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[2].value\': Cannot find field.",\n    "status": "INVALID_ARGUMENT",\n    "details": [\n      {\n        "@type": "type.googleapis.com/google.rpc.BadRequest",\n        "fieldViolations": [\n          {\n            "field": "generation_config.response_schema.properties[1].value",\n            "description": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[1].value\': Cannot find field."\n          },\n          {\n            "field": "generation_config.response_schema.properties[2].value",\n            "description": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[2].value\': Cannot find field."\n          }\n        ]\n      }\n    ]\n  }\n}'}
browser-use-webui-1  | During task with name 'thinking' and id '5ec84804-9394-035d-22b8-95d1432d30db'
browser-use-webui-1  | ERROR    [main] Error during execution: Error code: 400 - {'message': 'ostinato.BadRequestError: VertexAIException BadRequestError - {\n  "error": {\n    "code": 400,\n    "message": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[1].value\': Cannot find field.\\nInvalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[2].value\': Cannot find field.",\n    "status": "INVALID_ARGUMENT",\n    "details": [\n      {\n        "@type": "type.googleapis.com/google.rpc.BadRequest",\n        "fieldViolations": [\n          {\n            "field": "generation_config.response_schema.properties[1].value",\n            "description": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[1].value\': Cannot find field."\n          },\n          {\n            "field": "generation_config.response_schema.properties[2].value",\n            "description": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[2].value\': Cannot find field."\n          }\n        ]\n      }\n    ]\n  }\n}'}

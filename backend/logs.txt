 Service browser-use-webui  Building
#0 building with "desktop-linux" instance using docker driver

#1 [browser-use-webui internal] load build definition from Dockerfile
#1 transferring dockerfile: 2.94kB done
#1 DONE 0.0s

#2 [browser-use-webui internal] load metadata for docker.io/library/python:3.11-slim
#2 ...

#3 [browser-use-webui auth] library/python:pull token for registry-1.docker.io
#3 DONE 0.0s

#2 [browser-use-webui internal] load metadata for docker.io/library/python:3.11-slim
#2 DONE 1.9s
 Service browser-use-webui  Built

#4 [browser-use-webui internal] load .dockerignore
#4 transferring context: 717B 0.0s done
#4 DONE 0.0s

#5 [browser-use-webui  1/17] FROM docker.io/library/python:3.11-slim@sha256:82c07f2f6e35255b92eb16f38dbd22679d5e8fb523064138d7c6468e7bf0c15b
#5 DONE 0.0s

#6 [browser-use-webui internal] load build context
#6 transferring context: 218B done
#6 DONE 0.0s

#7 [browser-use-webui 12/17] RUN dbus-uuidgen > /etc/machine-id && service dbus start
#7 CACHED

#8 [browser-use-webui  5/17] WORKDIR /app
#8 CACHED

#9 [browser-use-webui  3/17] RUN git clone https://github.com/novnc/noVNC.git /opt/novnc     && git clone https://github.com/novnc/websockify /opt/novnc/utils/websockify     && ln -s /opt/novnc/vnc.html /opt/novnc/index.html
#9 CACHED

#10 [browser-use-webui  8/17] RUN playwright install --with-deps chromium
#10 CACHED

#11 [browser-use-webui 16/17] COPY start-tmux.sh /app/
#11 CACHED

#12 [browser-use-webui 14/17] RUN mkdir -p /var/log/supervisor
#12 CACHED

#13 [browser-use-webui  6/17] COPY requirements.txt .
#13 CACHED

#14 [browser-use-webui 15/17] COPY supervisord.conf /etc/supervisor/conf.d/supervisord.conf
#14 CACHED

#15 [browser-use-webui  9/17] RUN playwright install-deps
#15 CACHED

#16 [browser-use-webui 13/17] RUN mkdir -p /root/.tmux
#16 CACHED

#17 [browser-use-webui 11/17] RUN mkdir -p /run/dbus && chmod 755 /run/dbus
#17 CACHED

#18 [browser-use-webui  2/17] RUN apt-get update && apt-get install -y     wget     netcat-traditional     gnupg     curl     unzip     tmux     xvfb     libgconf-2-4     libxss1     libnss3     libnspr4     libasound2     libatk1.0-0     libatk-bridge2.0-0     libcups2     libdbus-1-3     libdrm2     libgbm1     libgtk-3-0     libxcomposite1     libxdamage1     libxfixes3     libxrandr2     xdg-utils     fonts-liberation     dbus     dbus-x11     xauth     xvfb     x11vnc     tigervnc-tools     supervisor     net-tools     procps     git     python3-numpy     fontconfig     fonts-dejavu     fonts-dejavu-core     fonts-dejavu-extra     && rm -rf /var/lib/apt/lists/*
#18 CACHED

#19 [browser-use-webui  4/17] RUN curl -fsSL https://dl.google.com/linux/linux_signing_key.pub | gpg --dearmor -o /usr/share/keyrings/google-chrome.gpg     && echo "deb [arch=amd64 signed-by=/usr/share/keyrings/google-chrome.gpg] http://dl.google.com/linux/chrome/deb/ stable main" | tee /etc/apt/sources.list.d/google-chrome.list     && apt-get update     && apt-get install -y google-chrome-stable
#19 CACHED

#20 [browser-use-webui 10/17] RUN apt-get update && apt-get install -y dbus
#20 CACHED

#21 [browser-use-webui  7/17] RUN pip install --no-cache-dir -r requirements.txt
#21 CACHED

#22 [browser-use-webui 17/17] RUN chmod +x /app/start-tmux.sh
#22 CACHED

#23 [browser-use-webui] exporting to image
#23 exporting layers done
#23 writing image sha256:4d308597ac45e1d2671aa1ffcd5f1321e41c8730426e21993c573b8c7c40a52d done
#23 naming to docker.io/library/action-engine-backend-browser-use-webui done
#23 DONE 0.0s

#24 [browser-use-webui] resolving provenance for metadata file
#24 DONE 0.0s
 Container action-engine-backend-browser-use-webui-1  Created
Attaching to browser-use-webui-1
browser-use-webui-1  | 2025-04-15 20:40:24,436 CRIT Supervisor is running as root.  Privileges were not dropped because no user is specified in the config file.  If you intend to run as root, you can set user=root in the config file to avoid this message.
browser-use-webui-1  | 2025-04-15 20:40:24,436 CRIT Supervisor is running as root.  Privileges were not dropped because no user is specified in the config file.  If you intend to run as root, you can set user=root in the config file to avoid this message.
browser-use-webui-1  | 2025-04-15 20:40:24,440 INFO supervisord started with pid 1
browser-use-webui-1  | 2025-04-15 20:40:24,440 INFO supervisord started with pid 1
browser-use-webui-1  | 2025-04-15 20:40:25,454 INFO spawned: 'dbus' with pid 7
browser-use-webui-1  | 2025-04-15 20:40:25,454 INFO spawned: 'dbus' with pid 7
browser-use-webui-1  | 2025-04-15 20:40:25,466 INFO spawned: '-bgfb' with pid 8
browser-use-webui-1  | 2025-04-15 20:40:25,466 INFO spawned: '-bgfb' with pid 8
browser-use-webui-1  | 2025-04-15 20:40:25,469 INFO spawned: 'tmux-server' with pid 9
browser-use-webui-1  | 2025-04-15 20:40:25,469 INFO spawned: 'tmux-server' with pid 9
browser-use-webui-1  | 2025-04-15 20:40:25,471 INFO spawned: 'vnc_setup' with pid 10
browser-use-webui-1  | 2025-04-15 20:40:25,471 INFO spawned: 'vnc_setup' with pid 10
browser-use-webui-1  | 2025-04-15 20:40:25,477 INFO spawned: 'x11vnc' with pid 11
browser-use-webui-1  | 2025-04-15 20:40:25,477 INFO spawned: 'x11vnc' with pid 11
browser-use-webui-1  | 2025-04-15 20:40:25,480 INFO spawned: 'x11vnc_log' with pid 12
browser-use-webui-1  | 2025-04-15 20:40:25,480 INFO spawned: 'x11vnc_log' with pid 12
browser-use-webui-1  | 2025-04-15 20:40:25,485 INFO spawned: 'novnc' with pid 13
browser-use-webui-1  | 2025-04-15 20:40:25,485 INFO spawned: 'novnc' with pid 13
browser-use-webui-1  | 2025-04-15 20:40:25,492 INFO spawned: 'backend' with pid 14
browser-use-webui-1  | 2025-04-15 20:40:25,492 INFO spawned: 'backend' with pid 14
browser-use-webui-1  | Xlib:  extension "DPMS" missing on display ":99".
browser-use-webui-1  | 
browser-use-webui-1  | The VNC desktop is:      7a46b9f0f397:0
browser-use-webui-1  | 2025-04-15 20:40:25,516 INFO success: vnc_setup entered RUNNING state, process has stayed up for > than 0 seconds (startsecs)
browser-use-webui-1  | 2025-04-15 20:40:25,516 INFO success: vnc_setup entered RUNNING state, process has stayed up for > than 0 seconds (startsecs)
browser-use-webui-1  | _XSERVTransSocketCreateListener: failed to bind listener
browser-use-webui-1  | _XSERVTransSocketUNIXCreateListener: ...SocketCreateListener() failed
browser-use-webui-1  | _XSERVTransMakeAllCOTSServerListeners: failed to create listener for unix
browser-use-webui-1  | -rw------- 1 root root 8 Apr 15 20:40 /root/.vnc/passwd
browser-use-webui-1  | 2025-04-15 20:40:25,644 INFO exited: vnc_setup (exit status 0; expected)
browser-use-webui-1  | 2025-04-15 20:40:25,644 INFO exited: vnc_setup (exit status 0; expected)
browser-use-webui-1  | Creating default tmux session: terminal-session
browser-use-webui-1  | Default session created successfully
browser-use-webui-1  | INFO:     Will watch for changes in these directories: ['/app']
browser-use-webui-1  | INFO:     Uvicorn running on http://0.0.0.0:7788 (Press CTRL+C to quit)
browser-use-webui-1  | INFO:     Started reloader process [14] using StatReload
browser-use-webui-1  | Active tmux sessions:
browser-use-webui-1  | terminal-session: 1 windows (created Tue Apr 15 20:40:25 2025)
browser-use-webui-1  | INFO     [browser_use] BrowserUse logging setup complete with level info
browser-use-webui-1  | 2025-04-15 20:40:26,918 INFO success: x11vnc_log entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)
browser-use-webui-1  | 2025-04-15 20:40:26,918 INFO success: x11vnc_log entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)
browser-use-webui-1  | 2025-04-15 20:40:28,612 INFO success: dbus entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-15 20:40:28,612 INFO success: dbus entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-15 20:40:28,612 INFO success: -bgfb entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-15 20:40:28,612 INFO success: -bgfb entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-15 20:40:28,612 INFO success: tmux-server entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-15 20:40:28,612 INFO success: tmux-server entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-15 20:40:28,612 INFO success: novnc entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-15 20:40:28,612 INFO success: novnc entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-15 20:40:28,612 INFO success: backend entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-15 20:40:28,612 INFO success: backend entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | PORT=5900
browser-use-webui-1  | INFO     [src.graph.environments.terminal] TerminalManager instance created
browser-use-webui-1  | INFO:     Started server process [39]
browser-use-webui-1  | INFO:     Waiting for application startup.
browser-use-webui-1  | INFO:     Application startup complete.
browser-use-webui-1  | INFO:     ('172.18.0.1', 64914) - "WebSocket /ws/terminal" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Generated terminal ID: 6370
browser-use-webui-1  | INFO:     ('172.18.0.1', 64916) - "WebSocket /ws/terminal" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Generated terminal ID: 2744
browser-use-webui-1  | 2025-04-15 20:40:30,732 INFO success: x11vnc entered RUNNING state, process has stayed up for > than 5 seconds (startsecs)
browser-use-webui-1  | 2025-04-15 20:40:30,732 INFO success: x11vnc entered RUNNING state, process has stayed up for > than 5 seconds (startsecs)
browser-use-webui-1  | Warning: could not find self.pem
browser-use-webui-1  | Using local websockify at /opt/novnc/utils/websockify/run
browser-use-webui-1  | Starting webserver and WebSockets proxy on host 0.0.0.0 port 6080
browser-use-webui-1  | INFO:     ('172.18.0.1', 64930) - "WebSocket /ws/terminal" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Generated terminal ID: 9646
browser-use-webui-1  | INFO:     ('172.18.0.1', 64932) - "WebSocket /ws/chat" [accepted]
browser-use-webui-1  | INFO     [main] New WebSocket connection attempt
browser-use-webui-1  | INFO     [main] New WebSocket connection for stop requests
browser-use-webui-1  | INFO:     ('172.18.0.1', 64940) - "WebSocket /ws/stop" [accepted]
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] New WebSocket connection attempt
browser-use-webui-1  | INFO:     ('172.18.0.1', 64946) - "WebSocket /ws/chat" [accepted]
browser-use-webui-1  | INFO     [main] New WebSocket connection for stop requests
browser-use-webui-1  | INFO:     ('172.18.0.1', 64962) - "WebSocket /ws/stop" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Terminal 6370 created with working directory: /root
browser-use-webui-1  | INFO     [main] Assigned terminal 6370 to new WebSocket connection
browser-use-webui-1  | INFO     [main] Polling terminal output for terminal 6370 )
browser-use-webui-1  | WebSocket server settings:
browser-use-webui-1  |   - Listen on 0.0.0.0:6080
browser-use-webui-1  |   - Web server. Web root: /opt/novnc
browser-use-webui-1  |   - No SSL/TLS support (no cert file)
browser-use-webui-1  |   - proxying from 0.0.0.0:6080 to localhost:5900
browser-use-webui-1  | 
browser-use-webui-1  | 
browser-use-webui-1  | Navigate to this URL:
browser-use-webui-1  | 
browser-use-webui-1  |     http://0.0.0.0:6080/vnc.html?host=0.0.0.0&port=6080
browser-use-webui-1  | 
browser-use-webui-1  | Press Ctrl-C to exit
browser-use-webui-1  | 
browser-use-webui-1  | 
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO:     ('172.18.0.1', 65054) - "WebSocket /ws/terminal" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Generated terminal ID: 5438
browser-use-webui-1  | 172.18.0.1 - - [15/Apr/2025 20:40:32] 172.18.0.1: Plain non-SSL (ws://) WebSocket connection
browser-use-webui-1  | 172.18.0.1 - - [15/Apr/2025 20:40:32] connecting to: localhost:5900
browser-use-webui-1  | INFO     [main] New WebSocket connection attempt
browser-use-webui-1  | INFO:     ('172.18.0.1', 65068) - "WebSocket /ws/chat" [accepted]
browser-use-webui-1  | INFO:     ('172.18.0.1', 65082) - "WebSocket /ws/stop" [accepted]
browser-use-webui-1  | INFO     [main] New WebSocket connection for stop requests
browser-use-webui-1  | 172.18.0.1 - - [15/Apr/2025 20:40:32] 172.18.0.1: Plain non-SSL (ws://) WebSocket connection
browser-use-webui-1  | 172.18.0.1 - - [15/Apr/2025 20:40:32] connecting to: localhost:5900
browser-use-webui-1  | INFO     [main] New WebSocket connection attempt
browser-use-webui-1  | INFO:     ('172.18.0.1', 65098) - "WebSocket /ws/chat" [accepted]
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] New WebSocket connection for stop requests
browser-use-webui-1  | INFO:     ('172.18.0.1', 65102) - "WebSocket /ws/stop" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Terminal 2744 created with working directory: /root
browser-use-webui-1  | INFO     [main] Assigned terminal 2744 to new WebSocket connection
browser-use-webui-1  | ERROR    [main] Failed to send initial terminal ID: 
browser-use-webui-1  | Traceback (most recent call last):
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/websockets/wsproto_impl.py", line 331, in send
browser-use-webui-1  |     output = self.conn.send(wsproto.events.Message(data=data))  # type: ignore
browser-use-webui-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/wsproto/__init__.py", line 64, in send
browser-use-webui-1  |     data += self.connection.send(event)
browser-use-webui-1  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/wsproto/connection.py", line 107, in send
browser-use-webui-1  |     raise LocalProtocolError(
browser-use-webui-1  | wsproto.utilities.LocalProtocolError: Event Message(data='{"terminal_id": "2744", "working_directory": "/root", "summary": "", "marker_id": 0}', frame_finished=True, message_finished=True) cannot be sent in state ConnectionState.CLOSED.
browser-use-webui-1  | 
browser-use-webui-1  | The above exception was the direct cause of the following exception:
browser-use-webui-1  | 
browser-use-webui-1  | Traceback (most recent call last):
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/websockets.py", line 85, in send
browser-use-webui-1  |     await self._send(message)
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 39, in sender
browser-use-webui-1  |     await send(message)
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/websockets/wsproto_impl.py", line 350, in send
browser-use-webui-1  |     raise ClientDisconnected from exc
browser-use-webui-1  | uvicorn.protocols.utils.ClientDisconnected
browser-use-webui-1  | 
browser-use-webui-1  | During handling of the above exception, another exception occurred:
browser-use-webui-1  | 
browser-use-webui-1  | Traceback (most recent call last):
browser-use-webui-1  |   File "/app/main.py", line 259, in terminal_endpoint
browser-use-webui-1  |     await websocket.send_text(
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/websockets.py", line 165, in send_text
browser-use-webui-1  |     await self.send({"type": "websocket.send", "text": data})
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/websockets.py", line 88, in send
browser-use-webui-1  |     raise WebSocketDisconnect(code=1006)
browser-use-webui-1  | starlette.websockets.WebSocketDisconnect
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Terminal 9646 created with working directory: /root
browser-use-webui-1  | INFO     [main] Assigned terminal 9646 to new WebSocket connection
browser-use-webui-1  | ERROR    [main] Failed to send initial terminal ID: 
browser-use-webui-1  | Traceback (most recent call last):
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/websockets/wsproto_impl.py", line 331, in send
browser-use-webui-1  |     output = self.conn.send(wsproto.events.Message(data=data))  # type: ignore
browser-use-webui-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/wsproto/__init__.py", line 64, in send
browser-use-webui-1  |     data += self.connection.send(event)
browser-use-webui-1  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/wsproto/connection.py", line 107, in send
browser-use-webui-1  |     raise LocalProtocolError(
browser-use-webui-1  | wsproto.utilities.LocalProtocolError: Event Message(data='{"terminal_id": "9646", "working_directory": "/root", "summary": "", "marker_id": 0}', frame_finished=True, message_finished=True) cannot be sent in state ConnectionState.CLOSED.
browser-use-webui-1  | 
browser-use-webui-1  | The above exception was the direct cause of the following exception:
browser-use-webui-1  | 
browser-use-webui-1  | Traceback (most recent call last):
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/websockets.py", line 85, in send
browser-use-webui-1  |     await self._send(message)
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 39, in sender
browser-use-webui-1  |     await send(message)
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/websockets/wsproto_impl.py", line 350, in send
browser-use-webui-1  |     raise ClientDisconnected from exc
browser-use-webui-1  | uvicorn.protocols.utils.ClientDisconnected
browser-use-webui-1  | 
browser-use-webui-1  | During handling of the above exception, another exception occurred:
browser-use-webui-1  | 
browser-use-webui-1  | Traceback (most recent call last):
browser-use-webui-1  |   File "/app/main.py", line 259, in terminal_endpoint
browser-use-webui-1  |     await websocket.send_text(
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/websockets.py", line 165, in send_text
browser-use-webui-1  |     await self.send({"type": "websocket.send", "text": data})
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/websockets.py", line 88, in send
browser-use-webui-1  |     raise WebSocketDisconnect(code=1006)
browser-use-webui-1  | starlette.websockets.WebSocketDisconnect
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Terminal 5438 created with working directory: /root
browser-use-webui-1  | INFO     [main] Assigned terminal 5438 to new WebSocket connection
browser-use-webui-1  | INFO     [main] Polling terminal output for terminal 5438 )
browser-use-webui-1  | INFO     [main] Initializing graph runner for new chat session
browser-use-webui-1  | INFO     [src.browser.custom_browser] No Chrome instance found
browser-use-webui-1  | INFO     [src.browser.custom_browser] Starting new Chrome instance
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Successfully connected to new Chrome instance
browser-use-webui-1  | INFO     [src.graph.graph_runner] Starting graph execution with streaming
browser-use-webui-1  | INFO     [src.graph.graph_runner] Thread ID: 831c90a0-655e-4e75-bcb4-e82393b78879
browser-use-webui-1  | INFO     [src.graph.nodes.planning] PlanningNode invoked
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Pruned 0 messages from 0 to 0
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] planning node validated tool calls: ['planning']
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] planning node got valid response with tools: ['planning']
browser-use-webui-1  | INFO     [src.graph.nodes.planning] Executing tool calls: [{'name': 'planning', 'args': {'command': 'create', 'task': 'Whoami', 'steps': [{'content': 'Identify user', 'substeps': [{'content': 'Check user ID'}, {'content': 'Verify user details'}]}]}, 'id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'type': 'tool_call'}]
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] planning node validated tool calls: ['planning']
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Executing tool planning
browser-use-webui-1  | INFO     [tools.tool_collection] Executing tool planning with input: {'command': 'create', 'task': 'Whoami', 'steps': [{'content': 'Identify user', 'substeps': [{'content': 'Check user ID'}, {'content': 'Verify user details'}]}]}
browser-use-webui-1  | INFO     [tools.planning] Planning tool invoked with command: PlanCommand.CREATE
browser-use-webui-1  | 2025-04-15 20:40:54,298 INFO reaped unknown pid 495 (exit status 0)
browser-use-webui-1  | 2025-04-15 20:40:54,298 INFO reaped unknown pid 495 (exit status 0)
browser-use-webui-1  | 2025-04-15 20:40:54,299 INFO reaped unknown pid 496 (exit status 0)
browser-use-webui-1  | 2025-04-15 20:40:54,299 INFO reaped unknown pid 496 (exit status 0)
browser-use-webui-1  | INFO     [src.graph.graph_runner] Step output: {'planning': {'task': 'whoami', 'plan': {'plan_id': 'plan_0', 'title': 'Whoami', 'steps': [{'content': 'Identify user', 'status': 'not_started', 'notes': '', 'substeps': [{'content': 'Check user ID', 'status': 'not_started', 'notes': '', 'substeps': []}, {'content': 'Verify user details', 'status': 'not_started', 'notes': '', 'substeps': []}]}]}, 'brain': {}, 'thought': '', 'summary': '', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'task': 'Whoami', 'steps': [{'content': 'Identify user', 'substeps': [{'content': 'Check user ID'}, {'content': 'Verify user details'}]}]}, 'id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Whoami (ID: plan_0)\n======================================\n\nProgress: 0/3 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 3 not started\n\nSteps:\n0. [ ] Identify user\n    0. [ ] Check user ID\n    1. [ ] Verify user details\n', 'tool_call_id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'tool_name': 'planning'}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False, 'pending_approval': {}, 'approved_tool_calls': [], 'pending_tool_calls': []}}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Updating current state from node: planning
browser-use-webui-1  | INFO     [src.graph.nodes.tool_generator] ToolSelectionNode invoked
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Pruned 0 messages from 2 to 2
browser-use-webui-1  | Traceback (most recent call last):
browser-use-webui-1  |   File "/usr/local/bin/uvicorn", line 8, in <module>
browser-use-webui-1  |     sys.exit(main())
browser-use-webui-1  |              ^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1161, in __call__
browser-use-webui-1  |     return self.main(*args, **kwargs)
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1082, in main
browser-use-webui-1  |     rv = self.invoke(ctx)
browser-use-webui-1  |          ^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1443, in invoke
browser-use-webui-1  |     return ctx.invoke(self.callback, **ctx.params)
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 788, in invoke
browser-use-webui-1  |     return __callback(*args, **kwargs)
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 412, in main
browser-use-webui-1  |     run(
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 574, in run
browser-use-webui-1  |     ChangeReload(config, target=server.run, sockets=[sock]).run()
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/supervisors/basereload.py", line 53, in run
browser-use-webui-1  |     for changes in self:
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/supervisors/basereload.py", line 72, in __next__
browser-use-webui-1  |     return self.should_restart()
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/supervisors/statreload.py", line 32, in should_restart
browser-use-webui-1  |     for file in self.iter_py_files():
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/supervisors/statreload.py", line 52, in iter_py_files
browser-use-webui-1  |     for path in list(reload_dir.rglob("*.py")):
browser-use-webui-1  |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/pathlib.py", line 968, in rglob
browser-use-webui-1  |     for p in selector.select_from(self):
browser-use-webui-1  |   File "/usr/local/lib/python3.11/pathlib.py", line 407, in _select_from
browser-use-webui-1  |     for starting_point in self._iterate_directories(parent_path, is_dir, scandir):
browser-use-webui-1  |   File "/usr/local/lib/python3.11/pathlib.py", line 397, in _iterate_directories
browser-use-webui-1  |     for p in self._iterate_directories(path, is_dir, scandir):
browser-use-webui-1  |   File "/usr/local/lib/python3.11/pathlib.py", line 397, in _iterate_directories
browser-use-webui-1  |     for p in self._iterate_directories(path, is_dir, scandir):
browser-use-webui-1  |   File "/usr/local/lib/python3.11/pathlib.py", line 397, in _iterate_directories
browser-use-webui-1  |     for p in self._iterate_directories(path, is_dir, scandir):
browser-use-webui-1  |   [Previous line repeated 6 more times]
browser-use-webui-1  |   File "/usr/local/lib/python3.11/pathlib.py", line 386, in _iterate_directories
browser-use-webui-1  |     with scandir(parent_path) as scandir_it:
browser-use-webui-1  |          ^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/pathlib.py", line 938, in _scandir
browser-use-webui-1  |     return os.scandir(self)
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^
browser-use-webui-1  | FileNotFoundError: [Errno 2] No such file or directory: '/app/data/chrome_data/Default/Extensions/Temp/scoped_dir8D6QOH/CRX_INSTALL/_locales/lv'
browser-use-webui-1  | WARNING  [src.graph.nodes.base_node] tool_generator node got response without valid tools: <tool_call>
browser-use-webui-1  | {"name": "browser_use", "arguments": {"action": "click", "index": 42[:]<button>}}
browser-use-webui-1  | </tool_call>
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] tool_generator node retrying, attempt 1
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] tool_generator node validated tool calls: ['browser_use']
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] tool_generator node got valid response with tools: ['browser_use']
browser-use-webui-1  | INFO     [src.graph.nodes.tool_generator] ToolSelectionNode selected tool calls: [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]
browser-use-webui-1  | INFO     [src.graph.graph_runner] Step output: {'tool_selection': {'task': 'whoami', 'plan': {'plan_id': 'plan_0', 'title': 'Whoami', 'steps': [{'content': 'Identify user', 'status': 'not_started', 'notes': '', 'substeps': [{'content': 'Check user ID', 'status': 'not_started', 'notes': '', 'substeps': []}, {'content': 'Verify user details', 'status': 'not_started', 'notes': '', 'substeps': []}]}]}, 'brain': {}, 'thought': '', 'summary': '', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'task': 'Whoami', 'steps': [{'content': 'Identify user', 'substeps': [{'content': 'Check user ID'}, {'content': 'Verify user details'}]}]}, 'id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Whoami (ID: plan_0)\n======================================\n\nProgress: 0/3 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 3 not started\n\nSteps:\n0. [ ] Identify user\n    0. [ ] Check user ID\n    1. [ ] Verify user details\n', 'tool_call_id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: ', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False, 'pending_approval': {}, 'approved_tool_calls': [], 'pending_tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Updating current state from node: tool_selection
browser-use-webui-1  | INFO     [src.graph.nodes.approval] Human in the loop Node invoked
browser-use-webui-1  | INFO     [src.graph.nodes.approval] Only non-terminal tool calls found, auto-approving
browser-use-webui-1  | INFO     [src.graph.nodes.approval] Final approved tool calls: [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]
browser-use-webui-1  | INFO     [src.graph.graph_runner] Step output: {'human_approval': {'task': 'whoami', 'plan': {'plan_id': 'plan_0', 'title': 'Whoami', 'steps': [{'content': 'Identify user', 'status': 'not_started', 'notes': '', 'substeps': [{'content': 'Check user ID', 'status': 'not_started', 'notes': '', 'substeps': []}, {'content': 'Verify user details', 'status': 'not_started', 'notes': '', 'substeps': []}]}]}, 'brain': {}, 'thought': '', 'summary': '', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'task': 'Whoami', 'steps': [{'content': 'Identify user', 'substeps': [{'content': 'Check user ID'}, {'content': 'Verify user details'}]}]}, 'id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Whoami (ID: plan_0)\n======================================\n\nProgress: 0/3 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 3 not started\n\nSteps:\n0. [ ] Identify user\n    0. [ ] Check user ID\n    1. [ ] Verify user details\n', 'tool_call_id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: ', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False, 'pending_approval': {}, 'approved_tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}], 'pending_tool_calls': []}}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Updating current state from node: human_approval
browser-use-webui-1  | INFO     [src.graph.nodes.executor] ExecutorNode invoked
browser-use-webui-1  | INFO     [src.graph.nodes.executor] State in ExecutorNode: {'task': 'whoami', 'plan': {'plan_id': 'plan_0', 'title': 'Whoami', 'steps': [{'content': 'Identify user', 'status': 'not_started', 'notes': '', 'substeps': [{'content': 'Check user ID', 'status': 'not_started', 'notes': '', 'substeps': []}, {'content': 'Verify user details', 'status': 'not_started', 'notes': '', 'substeps': []}]}]}, 'brain': {}, 'thought': '', 'summary': '', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'task': 'Whoami', 'steps': [{'content': 'Identify user', 'substeps': [{'content': 'Check user ID'}, {'content': 'Verify user details'}]}]}, 'id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Whoami (ID: plan_0)\n======================================\n\nProgress: 0/3 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 3 not started\n\nSteps:\n0. [ ] Identify user\n    0. [ ] Check user ID\n    1. [ ] Verify user details\n', 'tool_call_id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: ', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False, 'pending_approval': {}, 'approved_tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}], 'pending_tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}
browser-use-webui-1  | INFO     [src.graph.nodes.executor] Executing approved tool calls: [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] executor node validated tool calls: ['browser_use']
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Executing tool browser_use
browser-use-webui-1  | INFO     [tools.tool_collection] Executing tool browser_use with input: {'action': 'navigate', 'url': 'https://www.example.com'}
browser-use-webui-1  | INFO     [tools.browser_use] Browser tool invoked with action: BrowserAction.NAVIGATE
browser-use-webui-1  | INFO     [src.graph.graph_runner] Step output: {'executor': {'task': 'whoami', 'plan': {'plan_id': 'plan_0', 'title': 'Whoami', 'steps': [{'content': 'Identify user', 'status': 'not_started', 'notes': '', 'substeps': [{'content': 'Check user ID', 'status': 'not_started', 'notes': '', 'substeps': []}, {'content': 'Verify user details', 'status': 'not_started', 'notes': '', 'substeps': []}]}]}, 'brain': {}, 'thought': '', 'summary': '', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'task': 'Whoami', 'steps': [{'content': 'Identify user', 'substeps': [{'content': 'Check user ID'}, {'content': 'Verify user details'}]}]}, 'id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Whoami (ID: plan_0)\n======================================\n\nProgress: 0/3 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 3 not started\n\nSteps:\n0. [ ] Identify user\n    0. [ ] Check user ID\n    1. [ ] Verify user details\n', 'tool_call_id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: ', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}, {'type': 'AIMessage', 'content': '[Executor Node] Executing approved actions', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'Navigated to https://www.example.com', 'tool_call_id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'tool_name': 'browser_use'}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False, 'pending_approval': {'approved': False}, 'approved_tool_calls': [], 'pending_tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Updating current state from node: executor
browser-use-webui-1  | INFO     [src.graph.nodes.thinking] ThinkingNode invoked
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Pruned 0 messages from 5 to 5
browser-use-webui-1  | INFO     [src.graph.graph_runner] Step output: {'thinking': {'task': 'whoami', 'plan': {'plan_id': 'plan_0', 'title': 'Whoami', 'steps': [{'content': 'Identify user', 'status': 'not_started', 'notes': '', 'substeps': [{'content': 'Check user ID', 'status': 'not_started', 'notes': '', 'substeps': []}, {'content': 'Verify user details', 'status': 'not_started', 'notes': '', 'substeps': []}]}]}, 'brain': BrainState(prev_action_evaluation='Navigated to https://www.example.com', important_contents='The current plan is to identify the user, check their ID, and verify their details.', task_progress='The task has not yet started, with all steps not yet initiated.', future_plans='Next, we will check the user ID and then verify the user details.', thought="Let's proceed with checking the user ID.", summary='We are currently in the process of identifying the user. The next step is to check the user ID.'), 'thought': "Let's proceed with checking the user ID.", 'summary': 'We are currently in the process of identifying the user. The next step is to check the user ID.', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'task': 'Whoami', 'steps': [{'content': 'Identify user', 'substeps': [{'content': 'Check user ID'}, {'content': 'Verify user details'}]}]}, 'id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Whoami (ID: plan_0)\n======================================\n\nProgress: 0/3 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 3 not started\n\nSteps:\n0. [ ] Identify user\n    0. [ ] Check user ID\n    1. [ ] Verify user details\n', 'tool_call_id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: ', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}, {'type': 'AIMessage', 'content': '[Executor Node] Executing approved actions', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'Navigated to https://www.example.com', 'tool_call_id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'tool_name': 'browser_use'}, {'type': 'AIMessage', 'content': "[Thinking Node] Based on my analysis of the current system state:\nThought: Let's proceed with checking the user ID.\nSummary: We are currently in the process of identifying the user. The next step is to check the user ID."}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False, 'pending_approval': {'approved': False}, 'approved_tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}], 'pending_tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Updating current state from node: thinking
browser-use-webui-1  | INFO     [src.graph.nodes.planning] PlanningNode invoked
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Pruned 0 messages from 6 to 6
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] planning node validated tool calls: ['planning']
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] planning node got valid response with tools: ['planning']
browser-use-webui-1  | INFO     [src.graph.nodes.planning] Executing tool calls: [{'name': 'planning', 'args': {'command': 'mark_steps', 'plan_id': 'plan_0', 'step_updates': [{'index': 0, 'status': 'in_progress'}, {'index': [1, 0], 'status': 'in_progress'}]}, 'id': 'chatcmpl-tool-dc8bb3775a604882af3b99e0aea4dce0', 'type': 'tool_call'}]
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] planning node validated tool calls: ['planning']
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Executing tool planning
browser-use-webui-1  | INFO     [tools.tool_collection] Executing tool planning with input: {'command': 'mark_steps', 'plan_id': 'plan_0', 'step_updates': [{'index': 0, 'status': 'in_progress'}, {'index': [1, 0], 'status': 'in_progress'}]}
browser-use-webui-1  | INFO     [tools.planning] Planning tool invoked with command: PlanCommand.MARK_STEPS
browser-use-webui-1  | INFO     [src.graph.graph_runner] Step output: {'planning': {'task': 'whoami', 'plan': {'plan_id': 'plan_0', 'title': 'Whoami', 'steps': [{'content': 'Identify user', 'status': 'in_progress', 'notes': '', 'substeps': [{'content': 'Check user ID', 'status': 'not_started', 'notes': '', 'substeps': []}, {'content': 'Verify user details', 'status': 'not_started', 'notes': '', 'substeps': []}]}]}, 'brain': {'prev_action_evaluation': 'Navigated to https://www.example.com', 'important_contents': 'The current plan is to identify the user, check their ID, and verify their details.', 'task_progress': 'The task has not yet started, with all steps not yet initiated.', 'future_plans': 'Next, we will check the user ID and then verify the user details.', 'thought': "Let's proceed with checking the user ID.", 'summary': 'We are currently in the process of identifying the user. The next step is to check the user ID.'}, 'thought': "Let's proceed with checking the user ID.", 'summary': 'We are currently in the process of identifying the user. The next step is to check the user ID.', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'task': 'Whoami', 'steps': [{'content': 'Identify user', 'substeps': [{'content': 'Check user ID'}, {'content': 'Verify user details'}]}]}, 'id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Whoami (ID: plan_0)\n======================================\n\nProgress: 0/3 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 3 not started\n\nSteps:\n0. [ ] Identify user\n    0. [ ] Check user ID\n    1. [ ] Verify user details\n', 'tool_call_id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: ', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}, {'type': 'AIMessage', 'content': '[Executor Node] Executing approved actions', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'Navigated to https://www.example.com', 'tool_call_id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'tool_name': 'browser_use'}, {'type': 'AIMessage', 'content': "[Thinking Node] Based on my analysis of the current system state:\nThought: Let's proceed with checking the user ID.\nSummary: We are currently in the process of identifying the user. The next step is to check the user ID."}, {'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n[Planning Node] Based on the current state, I am updating the plan:\n\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'mark_steps', 'plan_id': 'plan_0', 'step_updates': [{'index': 0, 'status': 'in_progress'}, {'index': [1, 0], 'status': 'in_progress'}]}, 'id': 'chatcmpl-tool-dc8bb3775a604882af3b99e0aea4dce0', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'Invalid step index: 1', 'tool_call_id': 'chatcmpl-tool-dc8bb3775a604882af3b99e0aea4dce0', 'tool_name': 'planning'}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False, 'pending_approval': {'approved': False}, 'approved_tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}], 'pending_tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Updating current state from node: planning
browser-use-webui-1  | INFO     [src.graph.nodes.tool_generator] ToolSelectionNode invoked
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Pruned 0 messages from 8 to 8
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] tool_generator node validated tool calls: ['browser_use']
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] tool_generator node got valid response with tools: ['browser_use']
browser-use-webui-1  | INFO     [src.graph.nodes.tool_generator] ToolSelectionNode selected tool calls: [{'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}]
browser-use-webui-1  | INFO     [src.graph.graph_runner] Step output: {'tool_selection': {'task': 'whoami', 'plan': {'plan_id': 'plan_0', 'title': 'Whoami', 'steps': [{'content': 'Identify user', 'status': 'in_progress', 'notes': '', 'substeps': [{'content': 'Check user ID', 'status': 'not_started', 'notes': '', 'substeps': []}, {'content': 'Verify user details', 'status': 'not_started', 'notes': '', 'substeps': []}]}]}, 'brain': {'prev_action_evaluation': 'Navigated to https://www.example.com', 'important_contents': 'The current plan is to identify the user, check their ID, and verify their details.', 'task_progress': 'The task has not yet started, with all steps not yet initiated.', 'future_plans': 'Next, we will check the user ID and then verify the user details.', 'thought': "Let's proceed with checking the user ID.", 'summary': 'We are currently in the process of identifying the user. The next step is to check the user ID.'}, 'thought': "Let's proceed with checking the user ID.", 'summary': 'We are currently in the process of identifying the user. The next step is to check the user ID.', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'task': 'Whoami', 'steps': [{'content': 'Identify user', 'substeps': [{'content': 'Check user ID'}, {'content': 'Verify user details'}]}]}, 'id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Whoami (ID: plan_0)\n======================================\n\nProgress: 0/3 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 3 not started\n\nSteps:\n0. [ ] Identify user\n    0. [ ] Check user ID\n    1. [ ] Verify user details\n', 'tool_call_id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: ', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}, {'type': 'AIMessage', 'content': '[Executor Node] Executing approved actions', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'Navigated to https://www.example.com', 'tool_call_id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'tool_name': 'browser_use'}, {'type': 'AIMessage', 'content': "[Thinking Node] Based on my analysis of the current system state:\nThought: Let's proceed with checking the user ID.\nSummary: We are currently in the process of identifying the user. The next step is to check the user ID."}, {'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n[Planning Node] Based on the current state, I am updating the plan:\n\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'mark_steps', 'plan_id': 'plan_0', 'step_updates': [{'index': 0, 'status': 'in_progress'}, {'index': [1, 0], 'status': 'in_progress'}]}, 'id': 'chatcmpl-tool-dc8bb3775a604882af3b99e0aea4dce0', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'Invalid step index: 1', 'tool_call_id': 'chatcmpl-tool-dc8bb3775a604882af3b99e0aea4dce0', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: [Executor Node] Based on the current state and plan, the next logical action is to check the user ID. Since the plan indicates that the step "Check user ID" is in progress, I will proceed with executing the action to check the user ID.\n\n', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}]}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False, 'pending_approval': {'approved': False}, 'approved_tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}], 'pending_tool_calls': [{'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}]}}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Updating current state from node: tool_selection
browser-use-webui-1  | INFO     [src.graph.nodes.approval] Human in the loop Node invoked
browser-use-webui-1  | INFO     [src.graph.nodes.approval] Only non-terminal tool calls found, auto-approving
browser-use-webui-1  | INFO     [src.graph.nodes.approval] Final approved tool calls: [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}]
browser-use-webui-1  | INFO     [src.graph.graph_runner] Step output: {'human_approval': {'task': 'whoami', 'plan': {'plan_id': 'plan_0', 'title': 'Whoami', 'steps': [{'content': 'Identify user', 'status': 'in_progress', 'notes': '', 'substeps': [{'content': 'Check user ID', 'status': 'not_started', 'notes': '', 'substeps': []}, {'content': 'Verify user details', 'status': 'not_started', 'notes': '', 'substeps': []}]}]}, 'brain': {'prev_action_evaluation': 'Navigated to https://www.example.com', 'important_contents': 'The current plan is to identify the user, check their ID, and verify their details.', 'task_progress': 'The task has not yet started, with all steps not yet initiated.', 'future_plans': 'Next, we will check the user ID and then verify the user details.', 'thought': "Let's proceed with checking the user ID.", 'summary': 'We are currently in the process of identifying the user. The next step is to check the user ID.'}, 'thought': "Let's proceed with checking the user ID.", 'summary': 'We are currently in the process of identifying the user. The next step is to check the user ID.', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'task': 'Whoami', 'steps': [{'content': 'Identify user', 'substeps': [{'content': 'Check user ID'}, {'content': 'Verify user details'}]}]}, 'id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Whoami (ID: plan_0)\n======================================\n\nProgress: 0/3 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 3 not started\n\nSteps:\n0. [ ] Identify user\n    0. [ ] Check user ID\n    1. [ ] Verify user details\n', 'tool_call_id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: ', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}, {'type': 'AIMessage', 'content': '[Executor Node] Executing approved actions', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'Navigated to https://www.example.com', 'tool_call_id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'tool_name': 'browser_use'}, {'type': 'AIMessage', 'content': "[Thinking Node] Based on my analysis of the current system state:\nThought: Let's proceed with checking the user ID.\nSummary: We are currently in the process of identifying the user. The next step is to check the user ID."}, {'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n[Planning Node] Based on the current state, I am updating the plan:\n\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'mark_steps', 'plan_id': 'plan_0', 'step_updates': [{'index': 0, 'status': 'in_progress'}, {'index': [1, 0], 'status': 'in_progress'}]}, 'id': 'chatcmpl-tool-dc8bb3775a604882af3b99e0aea4dce0', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'Invalid step index: 1', 'tool_call_id': 'chatcmpl-tool-dc8bb3775a604882af3b99e0aea4dce0', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: [Executor Node] Based on the current state and plan, the next logical action is to check the user ID. Since the plan indicates that the step "Check user ID" is in progress, I will proceed with executing the action to check the user ID.\n\n', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}]}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False, 'pending_approval': {'approved': False}, 'approved_tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}], 'pending_tool_calls': []}}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Updating current state from node: human_approval
browser-use-webui-1  | INFO     [src.graph.nodes.executor] ExecutorNode invoked
browser-use-webui-1  | INFO     [src.graph.nodes.executor] State in ExecutorNode: {'task': 'whoami', 'plan': {'plan_id': 'plan_0', 'title': 'Whoami', 'steps': [{'content': 'Identify user', 'status': 'in_progress', 'notes': '', 'substeps': [{'content': 'Check user ID', 'status': 'not_started', 'notes': '', 'substeps': []}, {'content': 'Verify user details', 'status': 'not_started', 'notes': '', 'substeps': []}]}]}, 'brain': {'prev_action_evaluation': 'Navigated to https://www.example.com', 'important_contents': 'The current plan is to identify the user, check their ID, and verify their details.', 'task_progress': 'The task has not yet started, with all steps not yet initiated.', 'future_plans': 'Next, we will check the user ID and then verify the user details.', 'thought': "Let's proceed with checking the user ID.", 'summary': 'We are currently in the process of identifying the user. The next step is to check the user ID.'}, 'thought': "Let's proceed with checking the user ID.", 'summary': 'We are currently in the process of identifying the user. The next step is to check the user ID.', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'task': 'Whoami', 'steps': [{'content': 'Identify user', 'substeps': [{'content': 'Check user ID'}, {'content': 'Verify user details'}]}]}, 'id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Whoami (ID: plan_0)\n======================================\n\nProgress: 0/3 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 3 not started\n\nSteps:\n0. [ ] Identify user\n    0. [ ] Check user ID\n    1. [ ] Verify user details\n', 'tool_call_id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: ', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}, {'type': 'AIMessage', 'content': '[Executor Node] Executing approved actions', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'Navigated to https://www.example.com', 'tool_call_id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'tool_name': 'browser_use'}, {'type': 'AIMessage', 'content': "[Thinking Node] Based on my analysis of the current system state:\nThought: Let's proceed with checking the user ID.\nSummary: We are currently in the process of identifying the user. The next step is to check the user ID."}, {'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n[Planning Node] Based on the current state, I am updating the plan:\n\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'mark_steps', 'plan_id': 'plan_0', 'step_updates': [{'index': 0, 'status': 'in_progress'}, {'index': [1, 0], 'status': 'in_progress'}]}, 'id': 'chatcmpl-tool-dc8bb3775a604882af3b99e0aea4dce0', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'Invalid step index: 1', 'tool_call_id': 'chatcmpl-tool-dc8bb3775a604882af3b99e0aea4dce0', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: [Executor Node] Based on the current state and plan, the next logical action is to check the user ID. Since the plan indicates that the step "Check user ID" is in progress, I will proceed with executing the action to check the user ID.\n\n', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}]}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False, 'pending_approval': {'approved': False}, 'approved_tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}], 'pending_tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}]}
browser-use-webui-1  | INFO     [src.graph.nodes.executor] Executing approved tool calls: [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}]
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] executor node validated tool calls: ['browser_use', 'browser_use']
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Executing tool browser_use
browser-use-webui-1  | INFO     [tools.tool_collection] Executing tool browser_use with input: {'action': 'navigate', 'url': 'https://www.example.com'}
browser-use-webui-1  | INFO     [tools.browser_use] Browser tool invoked with action: BrowserAction.NAVIGATE
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Executing tool browser_use
browser-use-webui-1  | INFO     [tools.tool_collection] Executing tool browser_use with input: {'action': 'click', 'index': 0}
browser-use-webui-1  | INFO     [tools.browser_use] Browser tool invoked with action: BrowserAction.CLICK
browser-use-webui-1  | INFO     [src.graph.graph_runner] Step output: {'executor': {'task': 'whoami', 'plan': {'plan_id': 'plan_0', 'title': 'Whoami', 'steps': [{'content': 'Identify user', 'status': 'in_progress', 'notes': '', 'substeps': [{'content': 'Check user ID', 'status': 'not_started', 'notes': '', 'substeps': []}, {'content': 'Verify user details', 'status': 'not_started', 'notes': '', 'substeps': []}]}]}, 'brain': {'prev_action_evaluation': 'Navigated to https://www.example.com', 'important_contents': 'The current plan is to identify the user, check their ID, and verify their details.', 'task_progress': 'The task has not yet started, with all steps not yet initiated.', 'future_plans': 'Next, we will check the user ID and then verify the user details.', 'thought': "Let's proceed with checking the user ID.", 'summary': 'We are currently in the process of identifying the user. The next step is to check the user ID.'}, 'thought': "Let's proceed with checking the user ID.", 'summary': 'We are currently in the process of identifying the user. The next step is to check the user ID.', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'task': 'Whoami', 'steps': [{'content': 'Identify user', 'substeps': [{'content': 'Check user ID'}, {'content': 'Verify user details'}]}]}, 'id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Whoami (ID: plan_0)\n======================================\n\nProgress: 0/3 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 3 not started\n\nSteps:\n0. [ ] Identify user\n    0. [ ] Check user ID\n    1. [ ] Verify user details\n', 'tool_call_id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: ', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}, {'type': 'AIMessage', 'content': '[Executor Node] Executing approved actions', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'Navigated to https://www.example.com', 'tool_call_id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'tool_name': 'browser_use'}, {'type': 'AIMessage', 'content': "[Thinking Node] Based on my analysis of the current system state:\nThought: Let's proceed with checking the user ID.\nSummary: We are currently in the process of identifying the user. The next step is to check the user ID."}, {'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n[Planning Node] Based on the current state, I am updating the plan:\n\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'mark_steps', 'plan_id': 'plan_0', 'step_updates': [{'index': 0, 'status': 'in_progress'}, {'index': [1, 0], 'status': 'in_progress'}]}, 'id': 'chatcmpl-tool-dc8bb3775a604882af3b99e0aea4dce0', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'Invalid step index: 1', 'tool_call_id': 'chatcmpl-tool-dc8bb3775a604882af3b99e0aea4dce0', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: [Executor Node] Based on the current state and plan, the next logical action is to check the user ID. Since the plan indicates that the step "Check user ID" is in progress, I will proceed with executing the action to check the user ID.\n\n', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}]}, {'type': 'AIMessage', 'content': '[Executor Node] Executing approved actions', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'Navigated to https://www.example.com', 'tool_call_id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'tool_name': 'browser_use'}, {'type': 'ToolMessage', 'content': 'Clicked element at index 0 (a text="More information..." href="https://www.iana.org/domains/e...")', 'tool_call_id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'tool_name': 'browser_use'}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False, 'pending_approval': {'approved': False}, 'approved_tool_calls': [], 'pending_tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}]}}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Updating current state from node: executor
browser-use-webui-1  | INFO     [src.graph.nodes.thinking] ThinkingNode invoked
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Pruned 0 messages from 12 to 12
browser-use-webui-1  | INFO     [src.graph.graph_runner] Step output: {'thinking': {'task': 'whoami', 'plan': {'plan_id': 'plan_0', 'title': 'Whoami', 'steps': [{'content': 'Identify user', 'status': 'in_progress', 'notes': '', 'substeps': [{'content': 'Check user ID', 'status': 'not_started', 'notes': '', 'substeps': []}, {'content': 'Verify user details', 'status': 'not_started', 'notes': '', 'substeps': []}]}]}, 'brain': BrainState(prev_action_evaluation="The previous action was to navigate to the website, which is part of the plan to check the user ID. The current state shows that the step 'Check user ID' is in progress, indicating that the action to navigate to the website was successful.", important_contents='The next step in the plan is to verify the user details. Once the user ID is checked, we will move on to verifying the user details.', task_progress='The current progress is 0/3 steps completed, with 1 step in progress and 2 not started. This means we are still in the initial stages of the plan.', future_plans='The next step in the plan is to verify the user details. Once this step is completed, we will move on to the final step of the plan.', thought="Let's proceed with verifying the user details.", summary='We are currently in the process of identifying the user. The next step is to check the user ID, which is in progress. Once the user ID is verified, we will move on to the final step of the plan.'), 'thought': "Let's proceed with verifying the user details.", 'summary': 'We are currently in the process of identifying the user. The next step is to check the user ID, which is in progress. Once the user ID is verified, we will move on to the final step of the plan.', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'task': 'Whoami', 'steps': [{'content': 'Identify user', 'substeps': [{'content': 'Check user ID'}, {'content': 'Verify user details'}]}]}, 'id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Whoami (ID: plan_0)\n======================================\n\nProgress: 0/3 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 3 not started\n\nSteps:\n0. [ ] Identify user\n    0. [ ] Check user ID\n    1. [ ] Verify user details\n', 'tool_call_id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: ', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}, {'type': 'AIMessage', 'content': '[Executor Node] Executing approved actions', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'Navigated to https://www.example.com', 'tool_call_id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'tool_name': 'browser_use'}, {'type': 'AIMessage', 'content': "[Thinking Node] Based on my analysis of the current system state:\nThought: Let's proceed with checking the user ID.\nSummary: We are currently in the process of identifying the user. The next step is to check the user ID."}, {'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n[Planning Node] Based on the current state, I am updating the plan:\n\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'mark_steps', 'plan_id': 'plan_0', 'step_updates': [{'index': 0, 'status': 'in_progress'}, {'index': [1, 0], 'status': 'in_progress'}]}, 'id': 'chatcmpl-tool-dc8bb3775a604882af3b99e0aea4dce0', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'Invalid step index: 1', 'tool_call_id': 'chatcmpl-tool-dc8bb3775a604882af3b99e0aea4dce0', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: [Executor Node] Based on the current state and plan, the next logical action is to check the user ID. Since the plan indicates that the step "Check user ID" is in progress, I will proceed with executing the action to check the user ID.\n\n', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}]}, {'type': 'AIMessage', 'content': '[Executor Node] Executing approved actions', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'Navigated to https://www.example.com', 'tool_call_id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'tool_name': 'browser_use'}, {'type': 'ToolMessage', 'content': 'Clicked element at index 0 (a text="More information..." href="https://www.iana.org/domains/e...")', 'tool_call_id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'tool_name': 'browser_use'}, {'type': 'AIMessage', 'content': "[Thinking Node] Based on my analysis of the current system state:\nThought: Let's proceed with verifying the user details.\nSummary: We are currently in the process of identifying the user. The next step is to check the user ID, which is in progress. Once the user ID is verified, we will move on to the final step of the plan."}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False, 'pending_approval': {'approved': False}, 'approved_tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}], 'pending_tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}]}}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Updating current state from node: thinking
browser-use-webui-1  | INFO     [src.graph.nodes.planning] PlanningNode invoked
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Pruned 0 messages from 13 to 13
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] planning node validated tool calls: ['planning']
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] planning node got valid response with tools: ['planning']
browser-use-webui-1  | INFO     [src.graph.nodes.planning] Executing tool calls: [{'name': 'planning', 'args': {'command': 'mark_steps', 'plan_id': 'plan_0', 'step_updates': [{'index': 0, 'status': 'in_progress'}, {'index': [1, 0], 'status': 'in_progress'}]}, 'id': 'chatcmpl-tool-e52146a71f1145829316785ece374e15', 'type': 'tool_call'}]
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] planning node validated tool calls: ['planning']
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Executing tool planning
browser-use-webui-1  | INFO     [tools.tool_collection] Executing tool planning with input: {'command': 'mark_steps', 'plan_id': 'plan_0', 'step_updates': [{'index': 0, 'status': 'in_progress'}, {'index': [1, 0], 'status': 'in_progress'}]}
browser-use-webui-1  | INFO     [tools.planning] Planning tool invoked with command: PlanCommand.MARK_STEPS
browser-use-webui-1  | INFO     [src.graph.graph_runner] Step output: {'planning': {'task': 'whoami', 'plan': {'plan_id': 'plan_0', 'title': 'Whoami', 'steps': [{'content': 'Identify user', 'status': 'in_progress', 'notes': '', 'substeps': [{'content': 'Check user ID', 'status': 'not_started', 'notes': '', 'substeps': []}, {'content': 'Verify user details', 'status': 'not_started', 'notes': '', 'substeps': []}]}]}, 'brain': {'prev_action_evaluation': "The previous action was to navigate to the website, which is part of the plan to check the user ID. The current state shows that the step 'Check user ID' is in progress, indicating that the action to navigate to the website was successful.", 'important_contents': 'The next step in the plan is to verify the user details. Once the user ID is checked, we will move on to verifying the user details.', 'task_progress': 'The current progress is 0/3 steps completed, with 1 step in progress and 2 not started. This means we are still in the initial stages of the plan.', 'future_plans': 'The next step in the plan is to verify the user details. Once this step is completed, we will move on to the final step of the plan.', 'thought': "Let's proceed with verifying the user details.", 'summary': 'We are currently in the process of identifying the user. The next step is to check the user ID, which is in progress. Once the user ID is verified, we will move on to the final step of the plan.'}, 'thought': "Let's proceed with verifying the user details.", 'summary': 'We are currently in the process of identifying the user. The next step is to check the user ID, which is in progress. Once the user ID is verified, we will move on to the final step of the plan.', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'task': 'Whoami', 'steps': [{'content': 'Identify user', 'substeps': [{'content': 'Check user ID'}, {'content': 'Verify user details'}]}]}, 'id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Whoami (ID: plan_0)\n======================================\n\nProgress: 0/3 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 3 not started\n\nSteps:\n0. [ ] Identify user\n    0. [ ] Check user ID\n    1. [ ] Verify user details\n', 'tool_call_id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: ', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}, {'type': 'AIMessage', 'content': '[Executor Node] Executing approved actions', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'Navigated to https://www.example.com', 'tool_call_id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'tool_name': 'browser_use'}, {'type': 'AIMessage', 'content': "[Thinking Node] Based on my analysis of the current system state:\nThought: Let's proceed with checking the user ID.\nSummary: We are currently in the process of identifying the user. The next step is to check the user ID."}, {'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n[Planning Node] Based on the current state, I am updating the plan:\n\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'mark_steps', 'plan_id': 'plan_0', 'step_updates': [{'index': 0, 'status': 'in_progress'}, {'index': [1, 0], 'status': 'in_progress'}]}, 'id': 'chatcmpl-tool-dc8bb3775a604882af3b99e0aea4dce0', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'Invalid step index: 1', 'tool_call_id': 'chatcmpl-tool-dc8bb3775a604882af3b99e0aea4dce0', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: [Executor Node] Based on the current state and plan, the next logical action is to check the user ID. Since the plan indicates that the step "Check user ID" is in progress, I will proceed with executing the action to check the user ID.\n\n', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}]}, {'type': 'AIMessage', 'content': '[Executor Node] Executing approved actions', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'Navigated to https://www.example.com', 'tool_call_id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'tool_name': 'browser_use'}, {'type': 'ToolMessage', 'content': 'Clicked element at index 0 (a text="More information..." href="https://www.iana.org/domains/e...")', 'tool_call_id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'tool_name': 'browser_use'}, {'type': 'AIMessage', 'content': "[Thinking Node] Based on my analysis of the current system state:\nThought: Let's proceed with verifying the user details.\nSummary: We are currently in the process of identifying the user. The next step is to check the user ID, which is in progress. Once the user ID is verified, we will move on to the final step of the plan."}, {'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n[Planning Node] Based on the current state, I am updating the plan:\n\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'mark_steps', 'plan_id': 'plan_0', 'step_updates': [{'index': 0, 'status': 'in_progress'}, {'index': [1, 0], 'status': 'in_progress'}]}, 'id': 'chatcmpl-tool-e52146a71f1145829316785ece374e15', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'Invalid step index: 1', 'tool_call_id': 'chatcmpl-tool-e52146a71f1145829316785ece374e15', 'tool_name': 'planning'}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False, 'pending_approval': {'approved': False}, 'approved_tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}], 'pending_tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}]}}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Updating current state from node: planning
browser-use-webui-1  | INFO     [src.graph.nodes.tool_generator] ToolSelectionNode invoked
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Pruned 0 messages from 15 to 15
browser-use-webui-1  | INFO     [main] WebSocket disconnected for terminal 5438 
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] Polling task for terminal 5438 cancelled
browser-use-webui-1  | INFO:     ('172.18.0.1', 64940) - "WebSocket /ws/terminal" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Generated terminal ID: 1403
browser-use-webui-1  | 172.18.0.1 - - [15/Apr/2025 20:41:18] 172.18.0.1: Plain non-SSL (ws://) WebSocket connection
browser-use-webui-1  | 172.18.0.1 - - [15/Apr/2025 20:41:18] connecting to: localhost:5900
browser-use-webui-1  | INFO     [main] New WebSocket connection attempt
browser-use-webui-1  | INFO:     ('172.18.0.1', 64956) - "WebSocket /ws/chat" [accepted]
browser-use-webui-1  | INFO:     ('172.18.0.1', 64964) - "WebSocket /ws/stop" [accepted]
browser-use-webui-1  | INFO     [main] New WebSocket connection for stop requests
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | 172.18.0.1 - - [15/Apr/2025 20:41:18] 172.18.0.1: Plain non-SSL (ws://) WebSocket connection
browser-use-webui-1  | 172.18.0.1 - - [15/Apr/2025 20:41:18] connecting to: localhost:5900
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] New WebSocket connection attempt
browser-use-webui-1  | INFO:     ('172.18.0.1', 64976) - "WebSocket /ws/chat" [accepted]
browser-use-webui-1  | INFO     [main] New WebSocket connection for stop requests
browser-use-webui-1  | INFO:     ('172.18.0.1', 64984) - "WebSocket /ws/stop" [accepted]
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] tool_generator node validated tool calls: ['browser_use']
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] tool_generator node got valid response with tools: ['browser_use']
browser-use-webui-1  | INFO     [src.graph.nodes.tool_generator] ToolSelectionNode selected tool calls: [{'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-00f72373f2da4f94b31012647deb5831', 'type': 'tool_call'}]
browser-use-webui-1  | INFO     [src.graph.graph_runner] Step output: {'tool_selection': {'task': 'whoami', 'plan': {'plan_id': 'plan_0', 'title': 'Whoami', 'steps': [{'content': 'Identify user', 'status': 'in_progress', 'notes': '', 'substeps': [{'content': 'Check user ID', 'status': 'not_started', 'notes': '', 'substeps': []}, {'content': 'Verify user details', 'status': 'not_started', 'notes': '', 'substeps': []}]}]}, 'brain': {'prev_action_evaluation': "The previous action was to navigate to the website, which is part of the plan to check the user ID. The current state shows that the step 'Check user ID' is in progress, indicating that the action to navigate to the website was successful.", 'important_contents': 'The next step in the plan is to verify the user details. Once the user ID is checked, we will move on to verifying the user details.', 'task_progress': 'The current progress is 0/3 steps completed, with 1 step in progress and 2 not started. This means we are still in the initial stages of the plan.', 'future_plans': 'The next step in the plan is to verify the user details. Once this step is completed, we will move on to the final step of the plan.', 'thought': "Let's proceed with verifying the user details.", 'summary': 'We are currently in the process of identifying the user. The next step is to check the user ID, which is in progress. Once the user ID is verified, we will move on to the final step of the plan.'}, 'thought': "Let's proceed with verifying the user details.", 'summary': 'We are currently in the process of identifying the user. The next step is to check the user ID, which is in progress. Once the user ID is verified, we will move on to the final step of the plan.', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'task': 'Whoami', 'steps': [{'content': 'Identify user', 'substeps': [{'content': 'Check user ID'}, {'content': 'Verify user details'}]}]}, 'id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Whoami (ID: plan_0)\n======================================\n\nProgress: 0/3 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 3 not started\n\nSteps:\n0. [ ] Identify user\n    0. [ ] Check user ID\n    1. [ ] Verify user details\n', 'tool_call_id': 'chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: ', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}, {'type': 'AIMessage', 'content': '[Executor Node] Executing approved actions', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'Navigated to https://www.example.com', 'tool_call_id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'tool_name': 'browser_use'}, {'type': 'AIMessage', 'content': "[Thinking Node] Based on my analysis of the current system state:\nThought: Let's proceed with checking the user ID.\nSummary: We are currently in the process of identifying the user. The next step is to check the user ID."}, {'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n[Planning Node] Based on the current state, I am updating the plan:\n\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'mark_steps', 'plan_id': 'plan_0', 'step_updates': [{'index': 0, 'status': 'in_progress'}, {'index': [1, 0], 'status': 'in_progress'}]}, 'id': 'chatcmpl-tool-dc8bb3775a604882af3b99e0aea4dce0', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'Invalid step index: 1', 'tool_call_id': 'chatcmpl-tool-dc8bb3775a604882af3b99e0aea4dce0', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: [Executor Node] Based on the current state and plan, the next logical action is to check the user ID. Since the plan indicates that the step "Check user ID" is in progress, I will proceed with executing the action to check the user ID.\n\n', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}]}, {'type': 'AIMessage', 'content': '[Executor Node] Executing approved actions', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'Navigated to https://www.example.com', 'tool_call_id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'tool_name': 'browser_use'}, {'type': 'ToolMessage', 'content': 'Clicked element at index 0 (a text="More information..." href="https://www.iana.org/domains/e...")', 'tool_call_id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'tool_name': 'browser_use'}, {'type': 'AIMessage', 'content': "[Thinking Node] Based on my analysis of the current system state:\nThought: Let's proceed with verifying the user details.\nSummary: We are currently in the process of identifying the user. The next step is to check the user ID, which is in progress. Once the user ID is verified, we will move on to the final step of the plan."}, {'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n[Planning Node] Based on the current state, I am updating the plan:\n\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'mark_steps', 'plan_id': 'plan_0', 'step_updates': [{'index': 0, 'status': 'in_progress'}, {'index': [1, 0], 'status': 'in_progress'}]}, 'id': 'chatcmpl-tool-e52146a71f1145829316785ece374e15', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'Invalid step index: 1', 'tool_call_id': 'chatcmpl-tool-e52146a71f1145829316785ece374e15', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: [Executor Node] Based on the current state and plan, the next logical action is to check the user ID. Since the step "Check user ID" is in progress, I will proceed with executing the action to check the user ID.\n\n', 'tool_calls': [{'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-00f72373f2da4f94b31012647deb5831', 'type': 'tool_call'}]}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False, 'pending_approval': {'approved': False}, 'approved_tool_calls': [{'name': 'browser_use', 'args': {'action': 'navigate', 'url': 'https://www.example.com'}, 'id': 'chatcmpl-tool-1747640df3de41f19ccb3138375589db', 'type': 'tool_call'}, {'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5', 'type': 'tool_call'}], 'pending_tool_calls': [{'name': 'browser_use', 'args': {'action': 'click', 'index': 0}, 'id': 'chatcmpl-tool-00f72373f2da4f94b31012647deb5831', 'type': 'tool_call'}]}}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Updating current state from node: tool_selection
browser-use-webui-1  | ERROR    [main] Serialization error: 
browser-use-webui-1  | Traceback (most recent call last):
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/websockets/wsproto_impl.py", line 331, in send
browser-use-webui-1  |     output = self.conn.send(wsproto.events.Message(data=data))  # type: ignore
browser-use-webui-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/wsproto/__init__.py", line 64, in send
browser-use-webui-1  |     data += self.connection.send(event)
browser-use-webui-1  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/wsproto/connection.py", line 107, in send
browser-use-webui-1  |     raise LocalProtocolError(
browser-use-webui-1  | wsproto.utilities.LocalProtocolError: Event Message(data='{"tool_selection": {"task": "whoami", "plan": {"plan_id": "plan_0", "title": "Whoami", "steps": [{"content": "Identify user", "status": "in_progress", "notes": "", "substeps": [{"content": "Check user ID", "status": "not_started", "notes": "", "substeps": []}, {"content": "Verify user details", "status": "not_started", "notes": "", "substeps": []}]}]}, "brain": {"prev_action_evaluation": "The previous action was to navigate to the website, which is part of the plan to check the user ID. The current state shows that the step \'Check user ID\' is in progress, indicating that the action to navigate to the website was successful.", "important_contents": "The next step in the plan is to verify the user details. Once the user ID is checked, we will move on to verifying the user details.", "task_progress": "The current progress is 0/3 steps completed, with 1 step in progress and 2 not started. This means we are still in the initial stages of the plan.", "future_plans": "The next step in the plan is to verify the user details. Once this step is completed, we will move on to the final step of the plan.", "thought": "Let\'s proceed with verifying the user details.", "summary": "We are currently in the process of identifying the user. The next step is to check the user ID, which is in progress. Once the user ID is verified, we will move on to the final step of the plan."}, "thought": "Let\'s proceed with verifying the user details.", "summary": "We are currently in the process of identifying the user. The next step is to check the user ID, which is in progress. Once the user ID is verified, we will move on to the final step of the plan.", "context": {}, "messages": [{"type": "AIMessage", "content": "[Planning Node] Based on the current state, I am updating the plan:\\n", "tool_calls": [{"name": "planning", "args": {"command": "create", "task": "Whoami", "steps": [{"content": "Identify user", "substeps": [{"content": "Check user ID"}, {"content": "Verify user details"}]}]}, "id": "chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e", "type": "tool_call"}]}, {"type": "ToolMessage", "content": "The current plan: Whoami (ID: plan_0)\\n======================================\\n\\nProgress: 0/3 steps completed (0.0%)\\nStatus: 0 completed, 0 in progress, 0 blocked, 3 not started\\n\\nSteps:\\n0. [ ] Identify user\\n    0. [ ] Check user ID\\n    1. [ ] Verify user details\\n", "tool_call_id": "chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e", "tool_name": "planning"}, {"type": "AIMessage", "content": "[Tool Selection Node] Based on the current system state, I am suggesting to: ", "tool_calls": [{"name": "browser_use", "args": {"action": "navigate", "url": "https://www.example.com"}, "id": "chatcmpl-tool-1747640df3de41f19ccb3138375589db", "type": "tool_call"}]}, {"type": "AIMessage", "content": "[Executor Node] Executing approved actions", "tool_calls": [{"name": "browser_use", "args": {"action": "navigate", "url": "https://www.example.com"}, "id": "chatcmpl-tool-1747640df3de41f19ccb3138375589db", "type": "tool_call"}]}, {"type": "ToolMessage", "content": "Navigated to https://www.example.com", "tool_call_id": "chatcmpl-tool-1747640df3de41f19ccb3138375589db", "tool_name": "browser_use"}, {"type": "AIMessage", "content": "[Thinking Node] Based on my analysis of the current system state:\\nThought: Let\'s proceed with checking the user ID.\\nSummary: We are currently in the process of identifying the user. The next step is to check the user ID."}, {"type": "AIMessage", "content": "[Planning Node] Based on the current state, I am updating the plan:\\n[Planning Node] Based on the current state, I am updating the plan:\\n\\n", "tool_calls": [{"name": "planning", "args": {"command": "mark_steps", "plan_id": "plan_0", "step_updates": [{"index": 0, "status": "in_progress"}, {"index": [1, 0], "status": "in_progress"}]}, "id": "chatcmpl-tool-dc8bb3775a604882af3b99e0aea4dce0", "type": "tool_call"}]}, {"type": "ToolMessage", "content": "Invalid step index: 1", "tool_call_id": "chatcmpl-tool-dc8bb3775a604882af3b99e0aea4dce0", "tool_name": "planning"}, {"type": "AIMessage", "content": "[Tool Selection Node] Based on the current system state, I am suggesting to: [Executor Node] Based on the current state and plan, the next logical action is to check the user ID. Since the plan indicates that the step \\"Check user ID\\" is in progress, I will proceed with executing the action to check the user ID.\\n\\n", "tool_calls": [{"name": "browser_use", "args": {"action": "click", "index": 0}, "id": "chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5", "type": "tool_call"}]}, {"type": "AIMessage", "content": "[Executor Node] Executing approved actions", "tool_calls": [{"name": "browser_use", "args": {"action": "navigate", "url": "https://www.example.com"}, "id": "chatcmpl-tool-1747640df3de41f19ccb3138375589db", "type": "tool_call"}, {"name": "browser_use", "args": {"action": "click", "index": 0}, "id": "chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5", "type": "tool_call"}]}, {"type": "ToolMessage", "content": "Navigated to https://www.example.com", "tool_call_id": "chatcmpl-tool-1747640df3de41f19ccb3138375589db", "tool_name": "browser_use"}, {"type": "ToolMessage", "content": "Clicked element at index 0 (a text=\\"More information...\\" href=\\"https://www.iana.org/domains/e...\\")", "tool_call_id": "chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5", "tool_name": "browser_use"}, {"type": "AIMessage", "content": "[Thinking Node] Based on my analysis of the current system state:\\nThought: Let\'s proceed with verifying the user details.\\nSummary: We are currently in the process of identifying the user. The next step is to check the user ID, which is in progress. Once the user ID is verified, we will move on to the final step of the plan."}, {"type": "AIMessage", "content": "[Planning Node] Based on the current state, I am updating the plan:\\n[Planning Node] Based on the current state, I am updating the plan:\\n\\n", "tool_calls": [{"name": "planning", "args": {"command": "mark_steps", "plan_id": "plan_0", "step_updates": [{"index": 0, "status": "in_progress"}, {"index": [1, 0], "status": "in_progress"}]}, "id": "chatcmpl-tool-e52146a71f1145829316785ece374e15", "type": "tool_call"}]}, {"type": "ToolMessage", "content": "Invalid step index: 1", "tool_call_id": "chatcmpl-tool-e52146a71f1145829316785ece374e15", "tool_name": "planning"}, {"type": "AIMessage", "content": "[Tool Selection Node] Based on the current system state, I am suggesting to: [Executor Node] Based on the current state and plan, the next logical action is to check the user ID. Since the step \\"Check user ID\\" is in progress, I will proceed with executing the action to check the user ID.\\n\\n", "tool_calls": [{"name": "browser_use", "args": {"action": "click", "index": 0}, "id": "chatcmpl-tool-00f72373f2da4f94b31012647deb5831", "type": "tool_call"}]}], "tools_used": [], "error": null, "next_node": null, "exiting": false, "pending_approval": {"approved": false}, "approved_tool_calls": [{"name": "browser_use", "args": {"action": "navigate", "url": "https://www.example.com"}, "id": "chatcmpl-tool-1747640df3de41f19ccb3138375589db", "type": "tool_call"}, {"name": "browser_use", "args": {"action": "click", "index": 0}, "id": "chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5", "type": "tool_call"}], "pending_tool_calls": [{"name": "browser_use", "args": {"action": "click", "index": 0}, "id": "chatcmpl-tool-00f72373f2da4f94b31012647deb5831", "type": "tool_call"}]}, "thread_id": "831c90a0-655e-4e75-bcb4-e82393b78879"}', frame_finished=True, message_finished=True) cannot be sent in state ConnectionState.CLOSED.
browser-use-webui-1  | 
browser-use-webui-1  | The above exception was the direct cause of the following exception:
browser-use-webui-1  | 
browser-use-webui-1  | Traceback (most recent call last):
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/websockets.py", line 85, in send
browser-use-webui-1  |     await self._send(message)
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 39, in sender
browser-use-webui-1  |     await send(message)
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/websockets/wsproto_impl.py", line 350, in send
browser-use-webui-1  |     raise ClientDisconnected from exc
browser-use-webui-1  | uvicorn.protocols.utils.ClientDisconnected
browser-use-webui-1  | 
browser-use-webui-1  | During handling of the above exception, another exception occurred:
browser-use-webui-1  | 
browser-use-webui-1  | Traceback (most recent call last):
browser-use-webui-1  |   File "/app/main.py", line 169, in chat_endpoint
browser-use-webui-1  |     await websocket.send_text(json.dumps(update))
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/websockets.py", line 165, in send_text
browser-use-webui-1  |     await self.send({"type": "websocket.send", "text": data})
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/websockets.py", line 88, in send
browser-use-webui-1  |     raise WebSocketDisconnect(code=1006)
browser-use-webui-1  | starlette.websockets.WebSocketDisconnect
browser-use-webui-1  | ERROR    [main] Unexpected WebSocket error: Cannot call "send" once a close message has been sent.
browser-use-webui-1  | Traceback (most recent call last):
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/websockets/wsproto_impl.py", line 331, in send
browser-use-webui-1  |     output = self.conn.send(wsproto.events.Message(data=data))  # type: ignore
browser-use-webui-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/wsproto/__init__.py", line 64, in send
browser-use-webui-1  |     data += self.connection.send(event)
browser-use-webui-1  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/wsproto/connection.py", line 107, in send
browser-use-webui-1  |     raise LocalProtocolError(
browser-use-webui-1  | wsproto.utilities.LocalProtocolError: Event Message(data='{"tool_selection": {"task": "whoami", "plan": {"plan_id": "plan_0", "title": "Whoami", "steps": [{"content": "Identify user", "status": "in_progress", "notes": "", "substeps": [{"content": "Check user ID", "status": "not_started", "notes": "", "substeps": []}, {"content": "Verify user details", "status": "not_started", "notes": "", "substeps": []}]}]}, "brain": {"prev_action_evaluation": "The previous action was to navigate to the website, which is part of the plan to check the user ID. The current state shows that the step \'Check user ID\' is in progress, indicating that the action to navigate to the website was successful.", "important_contents": "The next step in the plan is to verify the user details. Once the user ID is checked, we will move on to verifying the user details.", "task_progress": "The current progress is 0/3 steps completed, with 1 step in progress and 2 not started. This means we are still in the initial stages of the plan.", "future_plans": "The next step in the plan is to verify the user details. Once this step is completed, we will move on to the final step of the plan.", "thought": "Let\'s proceed with verifying the user details.", "summary": "We are currently in the process of identifying the user. The next step is to check the user ID, which is in progress. Once the user ID is verified, we will move on to the final step of the plan."}, "thought": "Let\'s proceed with verifying the user details.", "summary": "We are currently in the process of identifying the user. The next step is to check the user ID, which is in progress. Once the user ID is verified, we will move on to the final step of the plan.", "context": {}, "messages": [{"type": "AIMessage", "content": "[Planning Node] Based on the current state, I am updating the plan:\\n", "tool_calls": [{"name": "planning", "args": {"command": "create", "task": "Whoami", "steps": [{"content": "Identify user", "substeps": [{"content": "Check user ID"}, {"content": "Verify user details"}]}]}, "id": "chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e", "type": "tool_call"}]}, {"type": "ToolMessage", "content": "The current plan: Whoami (ID: plan_0)\\n======================================\\n\\nProgress: 0/3 steps completed (0.0%)\\nStatus: 0 completed, 0 in progress, 0 blocked, 3 not started\\n\\nSteps:\\n0. [ ] Identify user\\n    0. [ ] Check user ID\\n    1. [ ] Verify user details\\n", "tool_call_id": "chatcmpl-tool-dacd3effec484a2b91a9eb5be08a474e", "tool_name": "planning"}, {"type": "AIMessage", "content": "[Tool Selection Node] Based on the current system state, I am suggesting to: ", "tool_calls": [{"name": "browser_use", "args": {"action": "navigate", "url": "https://www.example.com"}, "id": "chatcmpl-tool-1747640df3de41f19ccb3138375589db", "type": "tool_call"}]}, {"type": "AIMessage", "content": "[Executor Node] Executing approved actions", "tool_calls": [{"name": "browser_use", "args": {"action": "navigate", "url": "https://www.example.com"}, "id": "chatcmpl-tool-1747640df3de41f19ccb3138375589db", "type": "tool_call"}]}, {"type": "ToolMessage", "content": "Navigated to https://www.example.com", "tool_call_id": "chatcmpl-tool-1747640df3de41f19ccb3138375589db", "tool_name": "browser_use"}, {"type": "AIMessage", "content": "[Thinking Node] Based on my analysis of the current system state:\\nThought: Let\'s proceed with checking the user ID.\\nSummary: We are currently in the process of identifying the user. The next step is to check the user ID."}, {"type": "AIMessage", "content": "[Planning Node] Based on the current state, I am updating the plan:\\n[Planning Node] Based on the current state, I am updating the plan:\\n\\n", "tool_calls": [{"name": "planning", "args": {"command": "mark_steps", "plan_id": "plan_0", "step_updates": [{"index": 0, "status": "in_progress"}, {"index": [1, 0], "status": "in_progress"}]}, "id": "chatcmpl-tool-dc8bb3775a604882af3b99e0aea4dce0", "type": "tool_call"}]}, {"type": "ToolMessage", "content": "Invalid step index: 1", "tool_call_id": "chatcmpl-tool-dc8bb3775a604882af3b99e0aea4dce0", "tool_name": "planning"}, {"type": "AIMessage", "content": "[Tool Selection Node] Based on the current system state, I am suggesting to: [Executor Node] Based on the current state and plan, the next logical action is to check the user ID. Since the plan indicates that the step \\"Check user ID\\" is in progress, I will proceed with executing the action to check the user ID.\\n\\n", "tool_calls": [{"name": "browser_use", "args": {"action": "click", "index": 0}, "id": "chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5", "type": "tool_call"}]}, {"type": "AIMessage", "content": "[Executor Node] Executing approved actions", "tool_calls": [{"name": "browser_use", "args": {"action": "navigate", "url": "https://www.example.com"}, "id": "chatcmpl-tool-1747640df3de41f19ccb3138375589db", "type": "tool_call"}, {"name": "browser_use", "args": {"action": "click", "index": 0}, "id": "chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5", "type": "tool_call"}]}, {"type": "ToolMessage", "content": "Navigated to https://www.example.com", "tool_call_id": "chatcmpl-tool-1747640df3de41f19ccb3138375589db", "tool_name": "browser_use"}, {"type": "ToolMessage", "content": "Clicked element at index 0 (a text=\\"More information...\\" href=\\"https://www.iana.org/domains/e...\\")", "tool_call_id": "chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5", "tool_name": "browser_use"}, {"type": "AIMessage", "content": "[Thinking Node] Based on my analysis of the current system state:\\nThought: Let\'s proceed with verifying the user details.\\nSummary: We are currently in the process of identifying the user. The next step is to check the user ID, which is in progress. Once the user ID is verified, we will move on to the final step of the plan."}, {"type": "AIMessage", "content": "[Planning Node] Based on the current state, I am updating the plan:\\n[Planning Node] Based on the current state, I am updating the plan:\\n\\n", "tool_calls": [{"name": "planning", "args": {"command": "mark_steps", "plan_id": "plan_0", "step_updates": [{"index": 0, "status": "in_progress"}, {"index": [1, 0], "status": "in_progress"}]}, "id": "chatcmpl-tool-e52146a71f1145829316785ece374e15", "type": "tool_call"}]}, {"type": "ToolMessage", "content": "Invalid step index: 1", "tool_call_id": "chatcmpl-tool-e52146a71f1145829316785ece374e15", "tool_name": "planning"}, {"type": "AIMessage", "content": "[Tool Selection Node] Based on the current system state, I am suggesting to: [Executor Node] Based on the current state and plan, the next logical action is to check the user ID. Since the step \\"Check user ID\\" is in progress, I will proceed with executing the action to check the user ID.\\n\\n", "tool_calls": [{"name": "browser_use", "args": {"action": "click", "index": 0}, "id": "chatcmpl-tool-00f72373f2da4f94b31012647deb5831", "type": "tool_call"}]}], "tools_used": [], "error": null, "next_node": null, "exiting": false, "pending_approval": {"approved": false}, "approved_tool_calls": [{"name": "browser_use", "args": {"action": "navigate", "url": "https://www.example.com"}, "id": "chatcmpl-tool-1747640df3de41f19ccb3138375589db", "type": "tool_call"}, {"name": "browser_use", "args": {"action": "click", "index": 0}, "id": "chatcmpl-tool-e00ffab3f2094209bbc745db459dfce5", "type": "tool_call"}], "pending_tool_calls": [{"name": "browser_use", "args": {"action": "click", "index": 0}, "id": "chatcmpl-tool-00f72373f2da4f94b31012647deb5831", "type": "tool_call"}]}, "thread_id": "831c90a0-655e-4e75-bcb4-e82393b78879"}', frame_finished=True, message_finished=True) cannot be sent in state ConnectionState.CLOSED.
browser-use-webui-1  | 
browser-use-webui-1  | The above exception was the direct cause of the following exception:
browser-use-webui-1  | 
browser-use-webui-1  | Traceback (most recent call last):
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/websockets.py", line 85, in send
browser-use-webui-1  |     await self._send(message)
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 39, in sender
browser-use-webui-1  |     await send(message)
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/websockets/wsproto_impl.py", line 350, in send
browser-use-webui-1  |     raise ClientDisconnected from exc
browser-use-webui-1  | uvicorn.protocols.utils.ClientDisconnected
browser-use-webui-1  | 
browser-use-webui-1  | During handling of the above exception, another exception occurred:
browser-use-webui-1  | 
browser-use-webui-1  | Traceback (most recent call last):
browser-use-webui-1  |   File "/app/main.py", line 169, in chat_endpoint
browser-use-webui-1  |     await websocket.send_text(json.dumps(update))
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/websockets.py", line 165, in send_text
browser-use-webui-1  |     await self.send({"type": "websocket.send", "text": data})
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/websockets.py", line 88, in send
browser-use-webui-1  |     raise WebSocketDisconnect(code=1006)
browser-use-webui-1  | starlette.websockets.WebSocketDisconnect
browser-use-webui-1  | 
browser-use-webui-1  | During handling of the above exception, another exception occurred:
browser-use-webui-1  | 
browser-use-webui-1  | Traceback (most recent call last):
browser-use-webui-1  |   File "/app/main.py", line 181, in chat_endpoint
browser-use-webui-1  |     await websocket.send_text(json.dumps(error_response))
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/websockets.py", line 165, in send_text
browser-use-webui-1  |     await self.send({"type": "websocket.send", "text": data})
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/starlette/websockets.py", line 97, in send
browser-use-webui-1  |     raise RuntimeError('Cannot call "send" once a close message has been sent.')
browser-use-webui-1  | RuntimeError: Cannot call "send" once a close message has been sent.
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Terminal 1403 created with working directory: /root
browser-use-webui-1  | INFO     [main] Assigned terminal 1403 to new WebSocket connection
browser-use-webui-1  | INFO     [main] Polling terminal output for terminal 1403 )
browser-use-webui-1  | INFO     [main] WebSocket disconnected for terminal 1403 
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] Polling task for terminal 1403 cancelled
browser-use-webui-1  | INFO:     ('172.18.0.1', 64994) - "WebSocket /ws/terminal" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Generated terminal ID: 2993
browser-use-webui-1  | 172.18.0.1 - - [15/Apr/2025 20:41:21] 172.18.0.1: Plain non-SSL (ws://) WebSocket connection
browser-use-webui-1  | 172.18.0.1 - - [15/Apr/2025 20:41:21] connecting to: localhost:5900
browser-use-webui-1  | INFO:     ('172.18.0.1', 65008) - "WebSocket /ws/chat" [accepted]
browser-use-webui-1  | INFO     [main] New WebSocket connection attempt
browser-use-webui-1  | INFO     [main] New WebSocket connection for stop requests
browser-use-webui-1  | INFO:     ('172.18.0.1', 65010) - "WebSocket /ws/stop" [accepted]
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | 172.18.0.1 - - [15/Apr/2025 20:41:21] 172.18.0.1: Plain non-SSL (ws://) WebSocket connection
browser-use-webui-1  | 172.18.0.1 - - [15/Apr/2025 20:41:21] connecting to: localhost:5900
browser-use-webui-1  | INFO     [main] New WebSocket connection attempt
browser-use-webui-1  | INFO:     ('172.18.0.1', 65012) - "WebSocket /ws/chat" [accepted]
browser-use-webui-1  | INFO:     ('172.18.0.1', 65020) - "WebSocket /ws/stop" [accepted]
browser-use-webui-1  | INFO     [main] New WebSocket connection for stop requests
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Terminal 2993 created with working directory: /root
browser-use-webui-1  | INFO     [main] Assigned terminal 2993 to new WebSocket connection
browser-use-webui-1  | INFO     [main] Polling terminal output for terminal 2993 )
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] WebSocket disconnected for terminal 2993 
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] Polling task for terminal 2993 cancelled
browser-use-webui-1  | INFO:     ('172.18.0.1', 62710) - "WebSocket /ws/terminal" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Generated terminal ID: 9494
browser-use-webui-1  | 172.18.0.1 - - [15/Apr/2025 20:41:23] 172.18.0.1: Plain non-SSL (ws://) WebSocket connection
browser-use-webui-1  | 172.18.0.1 - - [15/Apr/2025 20:41:23] connecting to: localhost:5900
browser-use-webui-1  | INFO     [main] New WebSocket connection attempt
browser-use-webui-1  | INFO:     ('172.18.0.1', 62720) - "WebSocket /ws/chat" [accepted]
browser-use-webui-1  | INFO     [main] New WebSocket connection for stop requests
browser-use-webui-1  | INFO:     ('172.18.0.1', 62736) - "WebSocket /ws/stop" [accepted]
browser-use-webui-1  | 172.18.0.1 - - [15/Apr/2025 20:41:23] 172.18.0.1: Plain non-SSL (ws://) WebSocket connection
browser-use-webui-1  | 172.18.0.1 - - [15/Apr/2025 20:41:23] connecting to: localhost:5900
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO:     ('172.18.0.1', 62752) - "WebSocket /ws/chat" [accepted]
browser-use-webui-1  | INFO     [main] New WebSocket connection attempt
browser-use-webui-1  | INFO     [main] New WebSocket connection for stop requests
browser-use-webui-1  | INFO:     ('172.18.0.1', 62758) - "WebSocket /ws/stop" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Terminal 9494 created with working directory: /root
browser-use-webui-1  | INFO     [main] Assigned terminal 9494 to new WebSocket connection
browser-use-webui-1  | INFO     [main] Polling terminal output for terminal 9494 )

 Service browser-use-webui  Building
#0 building with "desktop-linux" instance using docker driver

#1 [browser-use-webui internal] load build definition from Dockerfile
#1 transferring dockerfile: 2.94kB done
#1 DONE 0.0s

#2 [browser-use-webui internal] load metadata for docker.io/library/python:3.11-slim
#2 ...

#3 [browser-use-webui auth] library/python:pull token for registry-1.docker.io
#3 DONE 0.0s

#2 [browser-use-webui internal] load metadata for docker.io/library/python:3.11-slim
#2 DONE 1.5s
 Service browser-use-webui  Built

#4 [browser-use-webui internal] load .dockerignore
#4 transferring context: 717B done
#4 DONE 0.0s

#5 [browser-use-webui  1/17] FROM docker.io/library/python:3.11-slim@sha256:82c07f2f6e35255b92eb16f38dbd22679d5e8fb523064138d7c6468e7bf0c15b
#5 DONE 0.0s

#6 [browser-use-webui internal] load build context
#6 transferring context: 218B done
#6 DONE 0.0s

#7 [browser-use-webui  3/17] RUN git clone https://github.com/novnc/noVNC.git /opt/novnc     && git clone https://github.com/novnc/websockify /opt/novnc/utils/websockify     && ln -s /opt/novnc/vnc.html /opt/novnc/index.html
#7 CACHED

#8 [browser-use-webui  6/17] COPY requirements.txt .
#8 CACHED

#9 [browser-use-webui 14/17] RUN mkdir -p /var/log/supervisor
#9 CACHED

#10 [browser-use-webui  8/17] RUN playwright install --with-deps chromium
#10 CACHED

#11 [browser-use-webui  7/17] RUN pip install --no-cache-dir -r requirements.txt
#11 CACHED

#12 [browser-use-webui 15/17] COPY supervisord.conf /etc/supervisor/conf.d/supervisord.conf
#12 CACHED

#13 [browser-use-webui 11/17] RUN mkdir -p /run/dbus && chmod 755 /run/dbus
#13 CACHED

#14 [browser-use-webui  5/17] WORKDIR /app
#14 CACHED

#15 [browser-use-webui 12/17] RUN dbus-uuidgen > /etc/machine-id && service dbus start
#15 CACHED

#16 [browser-use-webui 10/17] RUN apt-get update && apt-get install -y dbus
#16 CACHED

#17 [browser-use-webui  4/17] RUN curl -fsSL https://dl.google.com/linux/linux_signing_key.pub | gpg --dearmor -o /usr/share/keyrings/google-chrome.gpg     && echo "deb [arch=amd64 signed-by=/usr/share/keyrings/google-chrome.gpg] http://dl.google.com/linux/chrome/deb/ stable main" | tee /etc/apt/sources.list.d/google-chrome.list     && apt-get update     && apt-get install -y google-chrome-stable
#17 CACHED

#18 [browser-use-webui  2/17] RUN apt-get update && apt-get install -y     wget     netcat-traditional     gnupg     curl     unzip     tmux     xvfb     libgconf-2-4     libxss1     libnss3     libnspr4     libasound2     libatk1.0-0     libatk-bridge2.0-0     libcups2     libdbus-1-3     libdrm2     libgbm1     libgtk-3-0     libxcomposite1     libxdamage1     libxfixes3     libxrandr2     xdg-utils     fonts-liberation     dbus     dbus-x11     xauth     xvfb     x11vnc     tigervnc-tools     supervisor     net-tools     procps     git     python3-numpy     fontconfig     fonts-dejavu     fonts-dejavu-core     fonts-dejavu-extra     && rm -rf /var/lib/apt/lists/*
#18 CACHED

#19 [browser-use-webui  9/17] RUN playwright install-deps
#19 CACHED

#20 [browser-use-webui 16/17] COPY start-tmux.sh /app/
#20 CACHED

#21 [browser-use-webui 13/17] RUN mkdir -p /root/.tmux
#21 CACHED

#22 [browser-use-webui 17/17] RUN chmod +x /app/start-tmux.sh
#22 CACHED

#23 [browser-use-webui] exporting to image
#23 exporting layers done
#23 writing image sha256:4d308597ac45e1d2671aa1ffcd5f1321e41c8730426e21993c573b8c7c40a52d done
#23 naming to docker.io/library/action-engine-backend-browser-use-webui done
#23 DONE 0.0s

#24 [browser-use-webui] resolving provenance for metadata file
#24 DONE 0.0s
 Container action-engine-backend-browser-use-webui-1  Created
Attaching to browser-use-webui-1
browser-use-webui-1  | 2025-04-11 02:22:19,361 CRIT Supervisor is running as root.  Privileges were not dropped because no user is specified in the config file.  If you intend to run as root, you can set user=root in the config file to avoid this message.
browser-use-webui-1  | 2025-04-11 02:22:19,361 CRIT Supervisor is running as root.  Privileges were not dropped because no user is specified in the config file.  If you intend to run as root, you can set user=root in the config file to avoid this message.
browser-use-webui-1  | 2025-04-11 02:22:19,365 INFO supervisord started with pid 1
browser-use-webui-1  | 2025-04-11 02:22:19,365 INFO supervisord started with pid 1
browser-use-webui-1  | 2025-04-11 02:22:20,378 INFO spawned: 'dbus' with pid 7
browser-use-webui-1  | 2025-04-11 02:22:20,378 INFO spawned: 'dbus' with pid 7
browser-use-webui-1  | 2025-04-11 02:22:20,385 INFO spawned: '-bgfb' with pid 8
browser-use-webui-1  | 2025-04-11 02:22:20,385 INFO spawned: '-bgfb' with pid 8
browser-use-webui-1  | 2025-04-11 02:22:20,396 INFO spawned: 'tmux-server' with pid 9
browser-use-webui-1  | 2025-04-11 02:22:20,396 INFO spawned: 'tmux-server' with pid 9
browser-use-webui-1  | 2025-04-11 02:22:20,398 INFO spawned: 'vnc_setup' with pid 10
browser-use-webui-1  | 2025-04-11 02:22:20,398 INFO spawned: 'vnc_setup' with pid 10
browser-use-webui-1  | 2025-04-11 02:22:20,399 INFO spawned: 'x11vnc' with pid 11
browser-use-webui-1  | 2025-04-11 02:22:20,399 INFO spawned: 'x11vnc' with pid 11
browser-use-webui-1  | 2025-04-11 02:22:20,401 INFO spawned: 'x11vnc_log' with pid 12
browser-use-webui-1  | 2025-04-11 02:22:20,401 INFO spawned: 'x11vnc_log' with pid 12
browser-use-webui-1  | 2025-04-11 02:22:20,405 INFO spawned: 'novnc' with pid 13
browser-use-webui-1  | 2025-04-11 02:22:20,405 INFO spawned: 'novnc' with pid 13
browser-use-webui-1  | 2025-04-11 02:22:20,409 INFO spawned: 'backend' with pid 14
browser-use-webui-1  | 2025-04-11 02:22:20,409 INFO spawned: 'backend' with pid 14
browser-use-webui-1  | Xlib:  extension "DPMS" missing on display ":99".
browser-use-webui-1  | 
browser-use-webui-1  | The VNC desktop is:      30ee7a78b5e2:0
browser-use-webui-1  | 2025-04-11 02:22:20,441 INFO success: vnc_setup entered RUNNING state, process has stayed up for > than 0 seconds (startsecs)
browser-use-webui-1  | 2025-04-11 02:22:20,441 INFO success: vnc_setup entered RUNNING state, process has stayed up for > than 0 seconds (startsecs)
browser-use-webui-1  | _XSERVTransSocketCreateListener: failed to bind listener
browser-use-webui-1  | _XSERVTransSocketUNIXCreateListener: ...SocketCreateListener() failed
browser-use-webui-1  | _XSERVTransMakeAllCOTSServerListeners: failed to create listener for unix
browser-use-webui-1  | -rw------- 1 root root 8 Apr 11 02:22 /root/.vnc/passwd
browser-use-webui-1  | 2025-04-11 02:22:20,588 INFO exited: vnc_setup (exit status 0; expected)
browser-use-webui-1  | 2025-04-11 02:22:20,588 INFO exited: vnc_setup (exit status 0; expected)
browser-use-webui-1  | Creating default tmux session: terminal-session
browser-use-webui-1  | INFO:     Will watch for changes in these directories: ['/app']
browser-use-webui-1  | INFO:     Uvicorn running on http://0.0.0.0:7788 (Press CTRL+C to quit)
browser-use-webui-1  | INFO:     Started reloader process [14] using StatReload
browser-use-webui-1  | Default session created successfully
browser-use-webui-1  | Active tmux sessions:
browser-use-webui-1  | terminal-session: 1 windows (created Fri Apr 11 02:22:20 2025)
browser-use-webui-1  | INFO     [browser_use] BrowserUse logging setup complete with level info
browser-use-webui-1  | 2025-04-11 02:22:21,593 INFO success: x11vnc_log entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)
browser-use-webui-1  | 2025-04-11 02:22:21,593 INFO success: x11vnc_log entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)
browser-use-webui-1  | INFO     [src.graph.environments.terminal] TerminalManager instance created
browser-use-webui-1  | INFO:     Started server process [36]
browser-use-webui-1  | INFO:     Waiting for application startup.
browser-use-webui-1  | INFO:     Application startup complete.
browser-use-webui-1  | 2025-04-11 02:22:23,536 INFO success: dbus entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-11 02:22:23,536 INFO success: dbus entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-11 02:22:23,536 INFO success: -bgfb entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-11 02:22:23,536 INFO success: -bgfb entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-11 02:22:23,537 INFO success: tmux-server entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-11 02:22:23,537 INFO success: tmux-server entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-11 02:22:23,537 INFO success: novnc entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-11 02:22:23,537 INFO success: novnc entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-11 02:22:23,537 INFO success: backend entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | 2025-04-11 02:22:23,537 INFO success: backend entered RUNNING state, process has stayed up for > than 3 seconds (startsecs)
browser-use-webui-1  | PORT=5900
browser-use-webui-1  | INFO:     ('172.18.0.1', 63152) - "WebSocket /ws/terminal" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Generated terminal ID: 7153
browser-use-webui-1  | 2025-04-11 02:22:25,569 INFO success: x11vnc entered RUNNING state, process has stayed up for > than 5 seconds (startsecs)
browser-use-webui-1  | 2025-04-11 02:22:25,569 INFO success: x11vnc entered RUNNING state, process has stayed up for > than 5 seconds (startsecs)
browser-use-webui-1  | INFO:     ('172.18.0.1', 63160) - "WebSocket /ws/terminal" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Generated terminal ID: 5662
browser-use-webui-1  | Warning: could not find self.pem
browser-use-webui-1  | Using local websockify at /opt/novnc/utils/websockify/run
browser-use-webui-1  | Starting webserver and WebSockets proxy on host 0.0.0.0 port 6080
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Terminal 7153 created with working directory: /root
browser-use-webui-1  | INFO     [main] Assigned terminal 7153 to new WebSocket connection
browser-use-webui-1  | INFO     [main] Polling terminal output for terminal 7153 )
browser-use-webui-1  | WebSocket server settings:
browser-use-webui-1  |   - Listen on 0.0.0.0:6080
browser-use-webui-1  |   - Web server. Web root: /opt/novnc
browser-use-webui-1  |   - No SSL/TLS support (no cert file)
browser-use-webui-1  |   - proxying from 0.0.0.0:6080 to localhost:5900
browser-use-webui-1  | 
browser-use-webui-1  | 
browser-use-webui-1  | Navigate to this URL:
browser-use-webui-1  | 
browser-use-webui-1  |     http://0.0.0.0:6080/vnc.html?host=0.0.0.0&port=6080
browser-use-webui-1  | 
browser-use-webui-1  | Press Ctrl-C to exit
browser-use-webui-1  | 
browser-use-webui-1  | 
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Terminal 5662 created with working directory: /root
browser-use-webui-1  | INFO     [main] Assigned terminal 5662 to new WebSocket connection
browser-use-webui-1  | INFO     [main] Polling terminal output for terminal 5662 )
browser-use-webui-1  | INFO     [main] WebSocket disconnected for terminal 7153 
browser-use-webui-1  | INFO     [main] Polling task for terminal 7153 cancelled
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Generated terminal ID: 7096
browser-use-webui-1  | INFO:     ('172.18.0.1', 58440) - "WebSocket /ws/terminal" [accepted]
browser-use-webui-1  | INFO:     ('172.18.0.1', 58448) - "WebSocket /ws/chat" [accepted]
browser-use-webui-1  | INFO     [main] New WebSocket connection attempt
browser-use-webui-1  | 172.18.0.1 - - [11/Apr/2025 02:22:34] 172.18.0.1: Plain non-SSL (ws://) WebSocket connection
browser-use-webui-1  | 172.18.0.1 - - [11/Apr/2025 02:22:34] connecting to: localhost:5900
browser-use-webui-1  | INFO     [main] New WebSocket connection for stop requests
browser-use-webui-1  | INFO:     ('172.18.0.1', 58450) - "WebSocket /ws/stop" [accepted]
browser-use-webui-1  | 172.18.0.1 - - [11/Apr/2025 02:22:34] 172.18.0.1: Plain non-SSL (ws://) WebSocket connection
browser-use-webui-1  | 172.18.0.1 - - [11/Apr/2025 02:22:34] connecting to: localhost:5900
browser-use-webui-1  | INFO:     ('172.18.0.1', 58452) - "WebSocket /ws/chat" [accepted]
browser-use-webui-1  | INFO     [main] New WebSocket connection attempt
browser-use-webui-1  | INFO     [main] New WebSocket connection for stop requests
browser-use-webui-1  | INFO:     ('172.18.0.1', 58468) - "WebSocket /ws/stop" [accepted]
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Terminal 7096 created with working directory: /root
browser-use-webui-1  | INFO     [main] Assigned terminal 7096 to new WebSocket connection
browser-use-webui-1  | INFO     [main] Polling terminal output for terminal 7096 )
browser-use-webui-1  | INFO     [main] Initializing graph runner for new chat session
browser-use-webui-1  | INFO     [src.browser.custom_browser] No Chrome instance found
browser-use-webui-1  | INFO     [src.browser.custom_browser] Starting new Chrome instance
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Attempting to connect to new Chrome instance at 'http://localhost:9222'
browser-use-webui-1  | INFO     [src.browser.custom_browser] Successfully connected to new Chrome instance
browser-use-webui-1  | INFO     [src.graph.graph_runner] Starting graph execution with streaming
browser-use-webui-1  | INFO     [src.graph.graph_runner] Thread ID: 8f428b89-b3e6-40ef-9078-a1bd369af6b0
browser-use-webui-1  | INFO     [src.graph.nodes.planning] PlanningNode invoked
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Pruned 0 messages from 0 to 0
browser-use-webui-1  | 2025-04-11 02:22:58,172 INFO reaped unknown pid 481 (exit status 0)
browser-use-webui-1  | 2025-04-11 02:22:58,172 INFO reaped unknown pid 481 (exit status 0)
browser-use-webui-1  | 2025-04-11 02:22:58,173 INFO reaped unknown pid 482 (exit status 0)
browser-use-webui-1  | 2025-04-11 02:22:58,173 INFO reaped unknown pid 482 (exit status 0)
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] planning node validated tool calls: ['planning']
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] planning node got valid response with tools: ['planning']
browser-use-webui-1  | INFO     [src.graph.nodes.planning] Executing tool calls: [{'name': 'planning', 'args': {'command': 'create', 'task': 'Check directory contents', 'steps': [{'content': 'List files in root directory'}]}, 'id': 'call_0f3422cd-8ecd-4ff9-90d5-51b30351454c', 'type': 'tool_call'}]
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] planning node validated tool calls: ['planning']
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Executing tool planning
browser-use-webui-1  | INFO     [tools.tool_collection] Executing tool planning with input: {'command': 'create', 'task': 'Check directory contents', 'steps': [{'content': 'List files in root directory'}]}
browser-use-webui-1  | INFO     [tools.planning] Planning tool invoked with command: PlanCommand.CREATE
browser-use-webui-1  | INFO     [src.graph.graph_runner] Step output: {'planning': {'task': 'ls /', 'plan': {'plan_id': 'plan_0', 'title': 'Check directory contents', 'steps': [{'content': 'List files in root directory', 'status': 'not_started', 'notes': '', 'substeps': []}]}, 'brain': {}, 'thought': '', 'summary': '', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'task': 'Check directory contents', 'steps': [{'content': 'List files in root directory'}]}, 'id': 'call_0f3422cd-8ecd-4ff9-90d5-51b30351454c', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Check directory contents (ID: plan_0)\n========================================================\n\nProgress: 0/1 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 1 not started\n\nSteps:\n0. [ ] List files in root directory\n', 'tool_call_id': 'call_0f3422cd-8ecd-4ff9-90d5-51b30351454c', 'tool_name': 'planning'}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False}}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Updating current state from node: planning
browser-use-webui-1  | INFO     [src.graph.nodes.tool_generator] ToolSelectionNode invoked
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Pruned 0 messages from 2 to 2
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] tool_generator node validated tool calls: ['terminal']
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] tool_generator node got valid response with tools: ['terminal']
browser-use-webui-1  | INFO     [src.graph.nodes.tool_generator] ToolSelectionNode selected tool calls: [{'name': 'terminal', 'args': {'terminal_id': 7153, 'script': 'ls /', 'action': 'run'}, 'id': 'call_d4876854-fc82-4952-9270-f8b045793658', 'type': 'tool_call'}]
browser-use-webui-1  | INFO     [src.graph.graph_runner] Step output: {'tool_selection': {'task': 'ls /', 'plan': {'plan_id': 'plan_0', 'title': 'Check directory contents', 'steps': [{'content': 'List files in root directory', 'status': 'not_started', 'notes': '', 'substeps': []}]}, 'brain': {}, 'thought': '', 'summary': '', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'task': 'Check directory contents', 'steps': [{'content': 'List files in root directory'}]}, 'id': 'call_0f3422cd-8ecd-4ff9-90d5-51b30351454c', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Check directory contents (ID: plan_0)\n========================================================\n\nProgress: 0/1 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 1 not started\n\nSteps:\n0. [ ] List files in root directory\n', 'tool_call_id': 'call_0f3422cd-8ecd-4ff9-90d5-51b30351454c', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: [Executor Node]: Checking directory contents by running `ls /` in available terminal 7153.\n', 'tool_calls': [{'name': 'terminal', 'args': {'terminal_id': 7153, 'script': 'ls /', 'action': 'run'}, 'id': 'call_d4876854-fc82-4952-9270-f8b045793658', 'type': 'tool_call'}]}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False}}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Updating current state from node: tool_selection
browser-use-webui-1  | INFO     [src.graph.nodes.approval] Human in the loop Node invoked
browser-use-webui-1  | INFO     [src.graph.nodes.approval] State keys in HITL node: ['task', 'plan', 'brain', 'thought', 'summary', 'context', 'messages', 'tools_used', 'error', 'next_node', 'exiting']
browser-use-webui-1  | INFO     [src.graph.nodes.approval] HumanApprovalNode full state:
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   task: <class 'str'> -> ls /
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   plan: <class 'dict'> -> {'plan_id': 'plan_0', 'title': 'Check directory contents', 'steps': [{'content': 'List files in root directory', 'status': 'not_started', 'notes': '', 'substeps': []}]}
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   brain: <class 'dict'> -> {}
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   thought: <class 'str'> -> 
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   summary: <class 'str'> -> 
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   context: <class 'dict'> -> {}
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   messages: <class 'list'> -> [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'task': 'Check directory contents', 'steps': [{'content': 'List files in root directory'}]}, 'id': 'call_0f3422cd-8ecd-4ff9-90d5-51b30351454c', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Check directory contents (ID: plan_0)\n========================================================\n\nProgress: 0/1 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 1 not started\n\nSteps:\n0. [ ] List files in root directory\n', 'tool_call_id': 'call_0f3422cd-8ecd-4ff9-90d5-51b30351454c', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: [Executor Node]: Checking directory contents by running `ls /` in available terminal 7153.\n', 'tool_calls': [{'name': 'terminal', 'args': {'terminal_id': 7153, 'script': 'ls /', 'action': 'run'}, 'id': 'call_d4876854-fc82-4952-9270-f8b045793658', 'type': 'tool_call'}]}]
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   tools_used: <class 'list'> -> []
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   error: <class 'NoneType'> -> None
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   next_node: <class 'NoneType'> -> None
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   exiting: <class 'bool'> -> False
browser-use-webui-1  | INFO     [src.graph.nodes.approval] No pending_tool_calls found in state, checking messages
browser-use-webui-1  | INFO     [src.graph.nodes.approval] Found terminal tool call in messages: {'name': 'terminal', 'args': {'terminal_id': 7153, 'script': 'ls /', 'action': 'run'}, 'id': 'call_d4876854-fc82-4952-9270-f8b045793658', 'type': 'tool_call'}
browser-use-webui-1  | INFO     [src.graph.nodes.approval] Raising HITL interrupt for terminal action: {'name': 'terminal', 'args': {'terminal_id': 7153, 'script': 'ls /', 'action': 'run'}, 'id': 'call_d4876854-fc82-4952-9270-f8b045793658', 'type': 'tool_call'}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Step output: {'__interrupt__': (Interrupt(value={'tool_call': {'name': 'terminal', 'args': {'terminal_id': 7153, 'script': 'ls /', 'action': 'run'}, 'id': 'call_d4876854-fc82-4952-9270-f8b045793658', 'type': 'tool_call'}, 'message': "Do you approve executing the terminal command: 'ls /'?", 'terminal_id': 7153}, resumable=True, ns=['human_approval:3725850d-01aa-cb44-e54d-800814b43a65'], when='during'),)}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Found interrupt in step_output
browser-use-webui-1  | INFO     [src.graph.graph_runner] Formatted interrupt response: {'type': 'approval_request', 'data': {'tool_call': {'name': 'terminal', 'args': {'terminal_id': 7153, 'script': 'ls /', 'action': 'run'}, 'id': 'call_d4876854-fc82-4952-9270-f8b045793658', 'type': 'tool_call'}, 'message': "Do you approve executing the terminal command: 'ls /'?", 'terminal_id': 7153}, 'thread_id': '8f428b89-b3e6-40ef-9078-a1bd369af6b0'}
browser-use-webui-1  | INFO     [main] Sent approval request to client, waiting for response
browser-use-webui-1  | INFO     [main] Received approval response from client
browser-use-webui-1  | INFO     [src.graph.graph_runner] Handling approval: True
browser-use-webui-1  | INFO     [src.graph.graph_runner] Added tool call to approved_tool_calls: {'name': 'terminal', 'args': {'terminal_id': 7153, 'script': 'ls /', 'action': 'run'}, 'id': 'call_d4876854-fc82-4952-9270-f8b045793658', 'type': 'tool_call'}
browser-use-webui-1  | INFO     [src.graph.nodes.approval] Human in the loop Node invoked
browser-use-webui-1  | INFO     [src.graph.nodes.approval] State keys in HITL node: ['task', 'plan', 'brain', 'thought', 'summary', 'context', 'messages', 'tools_used', 'exiting']
browser-use-webui-1  | INFO     [src.graph.nodes.approval] HumanApprovalNode full state:
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   task: <class 'str'> -> ls /
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   plan: <class 'dict'> -> {'plan_id': 'plan_0', 'title': 'Check directory contents', 'steps': [{'content': 'List files in root directory', 'status': 'not_started', 'notes': '', 'substeps': []}]}
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   brain: <class 'dict'> -> {}
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   thought: <class 'str'> -> 
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   summary: <class 'str'> -> 
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   context: <class 'dict'> -> {}
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   messages: <class 'list'> -> [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'task': 'Check directory contents', 'steps': [{'content': 'List files in root directory'}]}, 'id': 'call_0f3422cd-8ecd-4ff9-90d5-51b30351454c', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Check directory contents (ID: plan_0)\n========================================================\n\nProgress: 0/1 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 1 not started\n\nSteps:\n0. [ ] List files in root directory\n', 'tool_call_id': 'call_0f3422cd-8ecd-4ff9-90d5-51b30351454c', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: [Executor Node]: Checking directory contents by running `ls /` in available terminal 7153.\n', 'tool_calls': [{'name': 'terminal', 'args': {'terminal_id': 7153, 'script': 'ls /', 'action': 'run'}, 'id': 'call_d4876854-fc82-4952-9270-f8b045793658', 'type': 'tool_call'}]}]
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   tools_used: <class 'list'> -> []
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   exiting: <class 'bool'> -> False
browser-use-webui-1  | INFO     [src.graph.nodes.approval] No pending_tool_calls found in state, checking messages
browser-use-webui-1  | INFO     [src.graph.nodes.approval] Found terminal tool call in messages: {'name': 'terminal', 'args': {'terminal_id': 7153, 'script': 'ls /', 'action': 'run'}, 'id': 'call_d4876854-fc82-4952-9270-f8b045793658', 'type': 'tool_call'}
browser-use-webui-1  | INFO     [src.graph.nodes.approval] Raising HITL interrupt for terminal action: {'name': 'terminal', 'args': {'terminal_id': 7153, 'script': 'ls /', 'action': 'run'}, 'id': 'call_d4876854-fc82-4952-9270-f8b045793658', 'type': 'tool_call'}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Post-approval step output: {'human_approval': {'task': 'ls /', 'plan': {'plan_id': 'plan_0', 'title': 'Check directory contents', 'steps': [{'content': 'List files in root directory', 'status': 'not_started', 'notes': '', 'substeps': []}]}, 'brain': {}, 'thought': '', 'summary': '', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'task': 'Check directory contents', 'steps': [{'content': 'List files in root directory'}]}, 'id': 'call_0f3422cd-8ecd-4ff9-90d5-51b30351454c', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Check directory contents (ID: plan_0)\n========================================================\n\nProgress: 0/1 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 1 not started\n\nSteps:\n0. [ ] List files in root directory\n', 'tool_call_id': 'call_0f3422cd-8ecd-4ff9-90d5-51b30351454c', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: [Executor Node]: Checking directory contents by running `ls /` in available terminal 7153.\n', 'tool_calls': [{'name': 'terminal', 'args': {'terminal_id': 7153, 'script': 'ls /', 'action': 'run'}, 'id': 'call_d4876854-fc82-4952-9270-f8b045793658', 'type': 'tool_call'}]}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False}}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Updating current state from node: human_approval
browser-use-webui-1  | INFO     [src.graph.nodes.executor] ExecutorNode invoked
browser-use-webui-1  | INFO     [src.graph.nodes.executor] No approved tool calls to execute
browser-use-webui-1  | INFO     [src.graph.graph_runner] Post-approval step output: {'executor': {'task': 'ls /', 'plan': {'plan_id': 'plan_0', 'title': 'Check directory contents', 'steps': [{'content': 'List files in root directory', 'status': 'not_started', 'notes': '', 'substeps': []}]}, 'brain': {}, 'thought': '', 'summary': '', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'command': 'create', 'task': 'Check directory contents', 'steps': [{'content': 'List files in root directory'}]}, 'id': 'call_0f3422cd-8ecd-4ff9-90d5-51b30351454c', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Check directory contents (ID: plan_0)\n========================================================\n\nProgress: 0/1 steps completed (0.0%)\nStatus: 0 completed, 0 in progress, 0 blocked, 1 not started\n\nSteps:\n0. [ ] List files in root directory\n', 'tool_call_id': 'call_0f3422cd-8ecd-4ff9-90d5-51b30351454c', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: [Executor Node]: Checking directory contents by running `ls /` in available terminal 7153.\n', 'tool_calls': [{'name': 'terminal', 'args': {'terminal_id': 7153, 'script': 'ls /', 'action': 'run'}, 'id': 'call_d4876854-fc82-4952-9270-f8b045793658', 'type': 'tool_call'}]}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False}}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Updating current state from node: executor
browser-use-webui-1  | INFO     [src.graph.nodes.thinking] ThinkingNode invoked
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Pruned 0 messages from 3 to 3
browser-use-webui-1  | ERROR    [src.graph.graph_runner] Error in post-approval processing: Error code: 400 - {'message': 'ostinato.BadRequestError: VertexAIException BadRequestError - {\n  "error": {\n    "code": 400,\n    "message": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[1].value\': Cannot find field.\\nInvalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[2].value\': Cannot find field.",\n    "status": "INVALID_ARGUMENT",\n    "details": [\n      {\n        "@type": "type.googleapis.com/google.rpc.BadRequest",\n        "fieldViolations": [\n          {\n            "field": "generation_config.response_schema.properties[1].value",\n            "description": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[1].value\': Cannot find field."\n          },\n          {\n            "field": "generation_config.response_schema.properties[2].value",\n            "description": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[2].value\': Cannot find field."\n          }\n        ]\n      }\n    ]\n  }\n}'}
browser-use-webui-1  | Traceback (most recent call last):
browser-use-webui-1  |   File "/app/src/graph/graph_runner.py", line 258, in handle_approval
browser-use-webui-1  |     async for step_output in self.graph.astream(
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langgraph/pregel/__init__.py", line 2305, in astream
browser-use-webui-1  |     async for _ in runner.atick(
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langgraph/pregel/runner.py", line 444, in atick
browser-use-webui-1  |     await arun_with_retry(
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langgraph/pregel/retry.py", line 128, in arun_with_retry
browser-use-webui-1  |     return await task.proc.ainvoke(task.input, config)
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langgraph/utils/runnable.py", line 583, in ainvoke
browser-use-webui-1  |     input = await step.ainvoke(input, config, **kwargs)
browser-use-webui-1  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langgraph/utils/runnable.py", line 371, in ainvoke
browser-use-webui-1  |     ret = await asyncio.create_task(coro, context=context)
browser-use-webui-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/app/src/graph/nodes/base_node.py", line 29, in __call__
browser-use-webui-1  |     return await self.ainvoke(state, config)
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/app/src/graph/nodes/thinking.py", line 70, in ainvoke
browser-use-webui-1  |     _response = await structured_llm.ainvoke(local_messages)
browser-use-webui-1  |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langchain_core/runnables/base.py", line 3058, in ainvoke
browser-use-webui-1  |     input = await asyncio.create_task(part(), context=context)  # type: ignore
browser-use-webui-1  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langchain_core/runnables/base.py", line 5364, in ainvoke
browser-use-webui-1  |     return await self.bound.ainvoke(
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 305, in ainvoke
browser-use-webui-1  |     llm_result = await self.agenerate_prompt(
browser-use-webui-1  |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 870, in agenerate_prompt
browser-use-webui-1  |     return await self.agenerate(
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 830, in agenerate
browser-use-webui-1  |     raise exceptions[0]
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 998, in _agenerate_with_cache
browser-use-webui-1  |     result = await self._agenerate(
browser-use-webui-1  |              ^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langchain_openai/chat_models/base.py", line 954, in _agenerate
browser-use-webui-1  |     _handle_openai_bad_request(e)
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langchain_openai/chat_models/base.py", line 950, in _agenerate
browser-use-webui-1  |     response = await self.root_async_client.beta.chat.completions.parse(
browser-use-webui-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/openai/resources/beta/chat/completions.py", line 436, in parse
browser-use-webui-1  |     return await self._post(
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/openai/_base_client.py", line 1849, in post
browser-use-webui-1  |     return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/openai/_base_client.py", line 1543, in request
browser-use-webui-1  |     return await self._request(
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/openai/_base_client.py", line 1644, in _request
browser-use-webui-1  |     raise self._make_status_error_from_response(err.response) from None
browser-use-webui-1  | openai.BadRequestError: Error code: 400 - {'message': 'ostinato.BadRequestError: VertexAIException BadRequestError - {\n  "error": {\n    "code": 400,\n    "message": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[1].value\': Cannot find field.\\nInvalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[2].value\': Cannot find field.",\n    "status": "INVALID_ARGUMENT",\n    "details": [\n      {\n        "@type": "type.googleapis.com/google.rpc.BadRequest",\n        "fieldViolations": [\n          {\n            "field": "generation_config.response_schema.properties[1].value",\n            "description": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[1].value\': Cannot find field."\n          },\n          {\n            "field": "generation_config.response_schema.properties[2].value",\n            "description": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[2].value\': Cannot find field."\n          }\n        ]\n      }\n    ]\n  }\n}'}
browser-use-webui-1  | During task with name 'thinking' and id 'e3166330-d967-7217-deee-90cbdb2d9250'
browser-use-webui-1  | ERROR    [main] Error in approval handling: Error code: 400 - {'message': 'ostinato.BadRequestError: VertexAIException BadRequestError - {\n  "error": {\n    "code": 400,\n    "message": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[1].value\': Cannot find field.\\nInvalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[2].value\': Cannot find field.",\n    "status": "INVALID_ARGUMENT",\n    "details": [\n      {\n        "@type": "type.googleapis.com/google.rpc.BadRequest",\n        "fieldViolations": [\n          {\n            "field": "generation_config.response_schema.properties[1].value",\n            "description": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[1].value\': Cannot find field."\n          },\n          {\n            "field": "generation_config.response_schema.properties[2].value",\n            "description": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[2].value\': Cannot find field."\n          }\n        ]\n      }\n    ]\n  }\n}'}
browser-use-webui-1  | 2025-04-11 04:22:58,244 INFO reaped unknown pid 35754 (exit status 0)
browser-use-webui-1  | 2025-04-11 04:22:58,244 INFO reaped unknown pid 35754 (exit status 0)
browser-use-webui-1  | 2025-04-11 04:22:58,247 INFO reaped unknown pid 35755 (exit status 0)
browser-use-webui-1  | 2025-04-11 04:22:58,247 INFO reaped unknown pid 35755 (exit status 0)
browser-use-webui-1  | 2025-04-11 06:22:58,925 INFO reaped unknown pid 70681 (exit status 0)
browser-use-webui-1  | 2025-04-11 06:22:58,925 INFO reaped unknown pid 70681 (exit status 0)
browser-use-webui-1  | 2025-04-11 06:22:58,925 INFO reaped unknown pid 70682 (exit status 0)
browser-use-webui-1  | 2025-04-11 06:22:58,925 INFO reaped unknown pid 70682 (exit status 0)
browser-use-webui-1  | 2025-04-11 08:22:59,077 INFO reaped unknown pid 6040 (exit status 0)
browser-use-webui-1  | 2025-04-11 08:22:59,077 INFO reaped unknown pid 6040 (exit status 0)
browser-use-webui-1  | 2025-04-11 08:22:59,078 INFO reaped unknown pid 6041 (exit status 0)
browser-use-webui-1  | 2025-04-11 08:22:59,078 INFO reaped unknown pid 6041 (exit status 0)
browser-use-webui-1  | 2025-04-11 10:22:58,788 INFO reaped unknown pid 40959 (exit status 0)
browser-use-webui-1  | 2025-04-11 10:22:58,788 INFO reaped unknown pid 40959 (exit status 0)
browser-use-webui-1  | 2025-04-11 10:22:58,789 INFO reaped unknown pid 40960 (exit status 0)
browser-use-webui-1  | 2025-04-11 10:22:58,789 INFO reaped unknown pid 40960 (exit status 0)
browser-use-webui-1  | INFO     [main] WebSocket disconnected for terminal 7096 
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] Polling task for terminal 7096 cancelled
browser-use-webui-1  | INFO:     ('172.18.0.1', 55508) - "WebSocket /ws/terminal" [accepted]
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Generated terminal ID: 1091
browser-use-webui-1  | INFO     [main] New WebSocket connection attempt
browser-use-webui-1  | INFO:     ('172.18.0.1', 55512) - "WebSocket /ws/chat" [accepted]
browser-use-webui-1  | 172.18.0.1 - - [11/Apr/2025 11:31:42] 172.18.0.1: Plain non-SSL (ws://) WebSocket connection
browser-use-webui-1  | 172.18.0.1 - - [11/Apr/2025 11:31:42] connecting to: localhost:5900
browser-use-webui-1  | INFO     [main] New WebSocket connection for stop requests
browser-use-webui-1  | INFO:     ('172.18.0.1', 55514) - "WebSocket /ws/stop" [accepted]
browser-use-webui-1  | 172.18.0.1 - - [11/Apr/2025 11:31:43] 172.18.0.1: Plain non-SSL (ws://) WebSocket connection
browser-use-webui-1  | 172.18.0.1 - - [11/Apr/2025 11:31:43] connecting to: localhost:5900
browser-use-webui-1  | INFO:     ('172.18.0.1', 55516) - "WebSocket /ws/stop" [accepted]
browser-use-webui-1  | INFO     [main] New WebSocket connection for stop requests
browser-use-webui-1  | INFO     [main] New WebSocket connection attempt
browser-use-webui-1  | INFO:     ('172.18.0.1', 55528) - "WebSocket /ws/chat" [accepted]
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [main] WebSocket disconnected
browser-use-webui-1  | INFO     [src.graph.environments.terminal] Terminal 1091 created with working directory: /root
browser-use-webui-1  | INFO     [main] Assigned terminal 1091 to new WebSocket connection
browser-use-webui-1  | INFO     [main] Polling terminal output for terminal 1091 )
browser-use-webui-1  | INFO     [main] Initializing graph runner for new chat session
browser-use-webui-1  | INFO     [src.graph.graph_runner] Starting graph execution with streaming
browser-use-webui-1  | INFO     [src.graph.graph_runner] Thread ID: d6165e05-ef04-4a2f-ba9a-516e4fe53afc
browser-use-webui-1  | INFO     [src.graph.nodes.planning] PlanningNode invoked
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Pruned 0 messages from 0 to 0
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] planning node validated tool calls: ['planning']
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] planning node got valid response with tools: ['planning']
browser-use-webui-1  | INFO     [src.graph.nodes.planning] Executing tool calls: [{'name': 'planning', 'args': {'plan_id': 'plan_0', 'command': 'mark_steps', 'step_updates': [{'status': 'in_progress', 'index': 0}]}, 'id': 'call_7531a387-c896-4785-99b1-eff94b69c6d4', 'type': 'tool_call'}]
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] planning node validated tool calls: ['planning']
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Executing tool planning
browser-use-webui-1  | INFO     [tools.tool_collection] Executing tool planning with input: {'plan_id': 'plan_0', 'command': 'mark_steps', 'step_updates': [{'status': 'in_progress', 'index': 0}]}
browser-use-webui-1  | INFO     [tools.planning] Planning tool invoked with command: PlanCommand.MARK_STEPS
browser-use-webui-1  | INFO     [src.graph.graph_runner] Step output: {'planning': {'task': 'ls /', 'plan': {'plan_id': 'plan_0', 'title': 'Check directory contents', 'steps': [{'content': 'List files in root directory', 'status': 'in_progress', 'notes': '', 'substeps': []}]}, 'brain': {}, 'thought': '', 'summary': '', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'plan_id': 'plan_0', 'command': 'mark_steps', 'step_updates': [{'status': 'in_progress', 'index': 0}]}, 'id': 'call_7531a387-c896-4785-99b1-eff94b69c6d4', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Check directory contents (ID: plan_0)\n========================================================\n\nProgress: 0/1 steps completed (0.0%)\nStatus: 0 completed, 1 in progress, 0 blocked, 0 not started\n\nSteps:\n0. [→] List files in root directory\n', 'tool_call_id': 'call_7531a387-c896-4785-99b1-eff94b69c6d4', 'tool_name': 'planning'}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False}}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Updating current state from node: planning
browser-use-webui-1  | INFO     [src.graph.nodes.tool_generator] ToolSelectionNode invoked
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Pruned 0 messages from 2 to 2
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] tool_generator node validated tool calls: ['terminal']
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] tool_generator node got valid response with tools: ['terminal']
browser-use-webui-1  | INFO     [src.graph.nodes.tool_generator] ToolSelectionNode selected tool calls: [{'name': 'terminal', 'args': {'script': 'ls /', 'terminal_id': '7153', 'action': 'run'}, 'id': 'call_86f0ac4c-51e4-4a94-8bf3-ec028f8ae89c', 'type': 'tool_call'}]
browser-use-webui-1  | INFO     [src.graph.graph_runner] Step output: {'tool_selection': {'task': 'ls /', 'plan': {'plan_id': 'plan_0', 'title': 'Check directory contents', 'steps': [{'content': 'List files in root directory', 'status': 'in_progress', 'notes': '', 'substeps': []}]}, 'brain': {}, 'thought': '', 'summary': '', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'plan_id': 'plan_0', 'command': 'mark_steps', 'step_updates': [{'status': 'in_progress', 'index': 0}]}, 'id': 'call_7531a387-c896-4785-99b1-eff94b69c6d4', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Check directory contents (ID: plan_0)\n========================================================\n\nProgress: 0/1 steps completed (0.0%)\nStatus: 0 completed, 1 in progress, 0 blocked, 0 not started\n\nSteps:\n0. [→] List files in root directory\n', 'tool_call_id': 'call_7531a387-c896-4785-99b1-eff94b69c6d4', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: [Executor Node]: Checking the root directory contents using the terminal.\n', 'tool_calls': [{'name': 'terminal', 'args': {'script': 'ls /', 'terminal_id': '7153', 'action': 'run'}, 'id': 'call_86f0ac4c-51e4-4a94-8bf3-ec028f8ae89c', 'type': 'tool_call'}]}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False}}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Updating current state from node: tool_selection
browser-use-webui-1  | INFO     [src.graph.nodes.approval] Human in the loop Node invoked
browser-use-webui-1  | INFO     [src.graph.nodes.approval] State keys in HITL node: ['task', 'plan', 'brain', 'thought', 'summary', 'context', 'messages', 'tools_used', 'error', 'next_node', 'exiting']
browser-use-webui-1  | INFO     [src.graph.nodes.approval] HumanApprovalNode full state:
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   task: <class 'str'> -> ls /
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   plan: <class 'dict'> -> {'plan_id': 'plan_0', 'title': 'Check directory contents', 'steps': [{'content': 'List files in root directory', 'status': 'in_progress', 'notes': '', 'substeps': []}]}
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   brain: <class 'dict'> -> {}
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   thought: <class 'str'> -> 
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   summary: <class 'str'> -> 
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   context: <class 'dict'> -> {}
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   messages: <class 'list'> -> [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'plan_id': 'plan_0', 'command': 'mark_steps', 'step_updates': [{'status': 'in_progress', 'index': 0}]}, 'id': 'call_7531a387-c896-4785-99b1-eff94b69c6d4', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Check directory contents (ID: plan_0)\n========================================================\n\nProgress: 0/1 steps completed (0.0%)\nStatus: 0 completed, 1 in progress, 0 blocked, 0 not started\n\nSteps:\n0. [→] List files in root directory\n', 'tool_call_id': 'call_7531a387-c896-4785-99b1-eff94b69c6d4', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: [Executor Node]: Checking the root directory contents using the terminal.\n', 'tool_calls': [{'name': 'terminal', 'args': {'script': 'ls /', 'terminal_id': '7153', 'action': 'run'}, 'id': 'call_86f0ac4c-51e4-4a94-8bf3-ec028f8ae89c', 'type': 'tool_call'}]}]
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   tools_used: <class 'list'> -> []
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   error: <class 'NoneType'> -> None
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   next_node: <class 'NoneType'> -> None
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   exiting: <class 'bool'> -> False
browser-use-webui-1  | INFO     [src.graph.nodes.approval] No pending_tool_calls found in state, checking messages
browser-use-webui-1  | INFO     [src.graph.nodes.approval] Found terminal tool call in messages: {'name': 'terminal', 'args': {'script': 'ls /', 'terminal_id': '7153', 'action': 'run'}, 'id': 'call_86f0ac4c-51e4-4a94-8bf3-ec028f8ae89c', 'type': 'tool_call'}
browser-use-webui-1  | INFO     [src.graph.nodes.approval] Raising HITL interrupt for terminal action: {'name': 'terminal', 'args': {'script': 'ls /', 'terminal_id': '7153', 'action': 'run'}, 'id': 'call_86f0ac4c-51e4-4a94-8bf3-ec028f8ae89c', 'type': 'tool_call'}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Step output: {'__interrupt__': (Interrupt(value={'tool_call': {'name': 'terminal', 'args': {'script': 'ls /', 'terminal_id': '7153', 'action': 'run'}, 'id': 'call_86f0ac4c-51e4-4a94-8bf3-ec028f8ae89c', 'type': 'tool_call'}, 'message': "Do you approve executing the terminal command: 'ls /'?", 'terminal_id': '7153'}, resumable=True, ns=['human_approval:f9069be0-442f-9b0e-119e-9f6b51a0c506'], when='during'),)}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Found interrupt in step_output
browser-use-webui-1  | INFO     [src.graph.graph_runner] Formatted interrupt response: {'type': 'approval_request', 'data': {'tool_call': {'name': 'terminal', 'args': {'script': 'ls /', 'terminal_id': '7153', 'action': 'run'}, 'id': 'call_86f0ac4c-51e4-4a94-8bf3-ec028f8ae89c', 'type': 'tool_call'}, 'message': "Do you approve executing the terminal command: 'ls /'?", 'terminal_id': '7153'}, 'thread_id': 'd6165e05-ef04-4a2f-ba9a-516e4fe53afc'}
browser-use-webui-1  | INFO     [main] Sent approval request to client, waiting for response
browser-use-webui-1  | INFO     [main] Received approval response from client
browser-use-webui-1  | INFO     [src.graph.graph_runner] Handling approval: False
browser-use-webui-1  | INFO     [src.graph.nodes.approval] Human in the loop Node invoked
browser-use-webui-1  | INFO     [src.graph.nodes.approval] State keys in HITL node: ['task', 'plan', 'brain', 'thought', 'summary', 'context', 'messages', 'tools_used', 'exiting']
browser-use-webui-1  | INFO     [src.graph.nodes.approval] HumanApprovalNode full state:
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   task: <class 'str'> -> ls /
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   plan: <class 'dict'> -> {'plan_id': 'plan_0', 'title': 'Check directory contents', 'steps': [{'content': 'List files in root directory', 'status': 'in_progress', 'notes': '', 'substeps': []}]}
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   brain: <class 'dict'> -> {}
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   thought: <class 'str'> -> 
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   summary: <class 'str'> -> 
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   context: <class 'dict'> -> {}
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   messages: <class 'list'> -> [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'plan_id': 'plan_0', 'command': 'mark_steps', 'step_updates': [{'status': 'in_progress', 'index': 0}]}, 'id': 'call_7531a387-c896-4785-99b1-eff94b69c6d4', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Check directory contents (ID: plan_0)\n========================================================\n\nProgress: 0/1 steps completed (0.0%)\nStatus: 0 completed, 1 in progress, 0 blocked, 0 not started\n\nSteps:\n0. [→] List files in root directory\n', 'tool_call_id': 'call_7531a387-c896-4785-99b1-eff94b69c6d4', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: [Executor Node]: Checking the root directory contents using the terminal.\n', 'tool_calls': [{'name': 'terminal', 'args': {'script': 'ls /', 'terminal_id': '7153', 'action': 'run'}, 'id': 'call_86f0ac4c-51e4-4a94-8bf3-ec028f8ae89c', 'type': 'tool_call'}]}]
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   tools_used: <class 'list'> -> []
browser-use-webui-1  | INFO     [src.graph.nodes.approval]   exiting: <class 'bool'> -> False
browser-use-webui-1  | INFO     [src.graph.nodes.approval] No pending_tool_calls found in state, checking messages
browser-use-webui-1  | INFO     [src.graph.nodes.approval] Found terminal tool call in messages: {'name': 'terminal', 'args': {'script': 'ls /', 'terminal_id': '7153', 'action': 'run'}, 'id': 'call_86f0ac4c-51e4-4a94-8bf3-ec028f8ae89c', 'type': 'tool_call'}
browser-use-webui-1  | INFO     [src.graph.nodes.approval] Raising HITL interrupt for terminal action: {'name': 'terminal', 'args': {'script': 'ls /', 'terminal_id': '7153', 'action': 'run'}, 'id': 'call_86f0ac4c-51e4-4a94-8bf3-ec028f8ae89c', 'type': 'tool_call'}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Post-approval step output: {'human_approval': {'task': 'ls /', 'plan': {'plan_id': 'plan_0', 'title': 'Check directory contents', 'steps': [{'content': 'List files in root directory', 'status': 'in_progress', 'notes': '', 'substeps': []}]}, 'brain': {}, 'thought': '', 'summary': '', 'context': {}, 'messages': [{'type': 'AIMessage', 'content': '[Planning Node] Based on the current state, I am updating the plan:\n', 'tool_calls': [{'name': 'planning', 'args': {'plan_id': 'plan_0', 'command': 'mark_steps', 'step_updates': [{'status': 'in_progress', 'index': 0}]}, 'id': 'call_7531a387-c896-4785-99b1-eff94b69c6d4', 'type': 'tool_call'}]}, {'type': 'ToolMessage', 'content': 'The current plan: Check directory contents (ID: plan_0)\n========================================================\n\nProgress: 0/1 steps completed (0.0%)\nStatus: 0 completed, 1 in progress, 0 blocked, 0 not started\n\nSteps:\n0. [→] List files in root directory\n', 'tool_call_id': 'call_7531a387-c896-4785-99b1-eff94b69c6d4', 'tool_name': 'planning'}, {'type': 'AIMessage', 'content': '[Tool Selection Node] Based on the current system state, I am suggesting to: [Executor Node]: Checking the root directory contents using the terminal.\n', 'tool_calls': [{'name': 'terminal', 'args': {'script': 'ls /', 'terminal_id': '7153', 'action': 'run'}, 'id': 'call_86f0ac4c-51e4-4a94-8bf3-ec028f8ae89c', 'type': 'tool_call'}]}], 'tools_used': [], 'error': None, 'next_node': None, 'exiting': False}}
browser-use-webui-1  | INFO     [src.graph.graph_runner] Updating current state from node: human_approval
browser-use-webui-1  | INFO     [src.graph.nodes.thinking] ThinkingNode invoked
browser-use-webui-1  | INFO     [src.graph.nodes.base_node] Pruned 0 messages from 3 to 3
browser-use-webui-1  | ERROR    [src.graph.graph_runner] Error in post-approval processing: Error code: 400 - {'message': 'ostinato.BadRequestError: VertexAIException BadRequestError - {\n  "error": {\n    "code": 400,\n    "message": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[1].value\': Cannot find field.\\nInvalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[2].value\': Cannot find field.",\n    "status": "INVALID_ARGUMENT",\n    "details": [\n      {\n        "@type": "type.googleapis.com/google.rpc.BadRequest",\n        "fieldViolations": [\n          {\n            "field": "generation_config.response_schema.properties[1].value",\n            "description": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[1].value\': Cannot find field."\n          },\n          {\n            "field": "generation_config.response_schema.properties[2].value",\n            "description": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[2].value\': Cannot find field."\n          }\n        ]\n      }\n    ]\n  }\n}'}
browser-use-webui-1  | Traceback (most recent call last):
browser-use-webui-1  |   File "/app/src/graph/graph_runner.py", line 258, in handle_approval
browser-use-webui-1  |     async for step_output in self.graph.astream(
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langgraph/pregel/__init__.py", line 2305, in astream
browser-use-webui-1  |     async for _ in runner.atick(
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langgraph/pregel/runner.py", line 444, in atick
browser-use-webui-1  |     await arun_with_retry(
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langgraph/pregel/retry.py", line 128, in arun_with_retry
browser-use-webui-1  |     return await task.proc.ainvoke(task.input, config)
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langgraph/utils/runnable.py", line 583, in ainvoke
browser-use-webui-1  |     input = await step.ainvoke(input, config, **kwargs)
browser-use-webui-1  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langgraph/utils/runnable.py", line 371, in ainvoke
browser-use-webui-1  |     ret = await asyncio.create_task(coro, context=context)
browser-use-webui-1  |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/app/src/graph/nodes/base_node.py", line 29, in __call__
browser-use-webui-1  |     return await self.ainvoke(state, config)
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/app/src/graph/nodes/thinking.py", line 70, in ainvoke
browser-use-webui-1  |     _response = await structured_llm.ainvoke(local_messages)
browser-use-webui-1  |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langchain_core/runnables/base.py", line 3058, in ainvoke
browser-use-webui-1  |     input = await asyncio.create_task(part(), context=context)  # type: ignore
browser-use-webui-1  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langchain_core/runnables/base.py", line 5364, in ainvoke
browser-use-webui-1  |     return await self.bound.ainvoke(
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 305, in ainvoke
browser-use-webui-1  |     llm_result = await self.agenerate_prompt(
browser-use-webui-1  |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 870, in agenerate_prompt
browser-use-webui-1  |     return await self.agenerate(
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 830, in agenerate
browser-use-webui-1  |     raise exceptions[0]
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 998, in _agenerate_with_cache
browser-use-webui-1  |     result = await self._agenerate(
browser-use-webui-1  |              ^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langchain_openai/chat_models/base.py", line 954, in _agenerate
browser-use-webui-1  |     _handle_openai_bad_request(e)
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/langchain_openai/chat_models/base.py", line 950, in _agenerate
browser-use-webui-1  |     response = await self.root_async_client.beta.chat.completions.parse(
browser-use-webui-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/openai/resources/beta/chat/completions.py", line 436, in parse
browser-use-webui-1  |     return await self._post(
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/openai/_base_client.py", line 1849, in post
browser-use-webui-1  |     return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/openai/_base_client.py", line 1543, in request
browser-use-webui-1  |     return await self._request(
browser-use-webui-1  |            ^^^^^^^^^^^^^^^^^^^^
browser-use-webui-1  |   File "/usr/local/lib/python3.11/site-packages/openai/_base_client.py", line 1644, in _request
browser-use-webui-1  |     raise self._make_status_error_from_response(err.response) from None
browser-use-webui-1  | openai.BadRequestError: Error code: 400 - {'message': 'ostinato.BadRequestError: VertexAIException BadRequestError - {\n  "error": {\n    "code": 400,\n    "message": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[1].value\': Cannot find field.\\nInvalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[2].value\': Cannot find field.",\n    "status": "INVALID_ARGUMENT",\n    "details": [\n      {\n        "@type": "type.googleapis.com/google.rpc.BadRequest",\n        "fieldViolations": [\n          {\n            "field": "generation_config.response_schema.properties[1].value",\n            "description": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[1].value\': Cannot find field."\n          },\n          {\n            "field": "generation_config.response_schema.properties[2].value",\n            "description": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[2].value\': Cannot find field."\n          }\n        ]\n      }\n    ]\n  }\n}'}
browser-use-webui-1  | During task with name 'thinking' and id 'f8b04ef8-b0a9-3676-c984-1879085b05cf'
browser-use-webui-1  | ERROR    [main] Error in approval handling: Error code: 400 - {'message': 'ostinato.BadRequestError: VertexAIException BadRequestError - {\n  "error": {\n    "code": 400,\n    "message": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[1].value\': Cannot find field.\\nInvalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[2].value\': Cannot find field.",\n    "status": "INVALID_ARGUMENT",\n    "details": [\n      {\n        "@type": "type.googleapis.com/google.rpc.BadRequest",\n        "fieldViolations": [\n          {\n            "field": "generation_config.response_schema.properties[1].value",\n            "description": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[1].value\': Cannot find field."\n          },\n          {\n            "field": "generation_config.response_schema.properties[2].value",\n            "description": "Invalid JSON payload received. Unknown name \\"examples\\" at \'generation_config.response_schema.properties[2].value\': Cannot find field."\n          }\n        ]\n      }\n    ]\n  }\n}'}
